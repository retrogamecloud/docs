---
title: "8.5. VisiÃ³n General de CI/CD"
description: "IntegraciÃ³n y despliegue continuo con GitHub Actions y GitOps"
icon: "rocket"
---

## FilosofÃ­a CI/CD

RetroGame Cloud implementa un pipeline completo de CI/CD que automatiza desde el commit hasta el despliegue en producciÃ³n, siguiendo principios GitOps.

<CardGroup cols={3}>
  <Card title="AutomatizaciÃ³n Total" icon="robot">
    Desde commit hasta producciÃ³n
    
    Sin intervenciÃ³n manual
  </Card>
  
  <Card title="GitOps" icon="code-branch">
    Git como fuente de verdad
    
    Pull Requests para todo
  </Card>
  
  <Card title="Seguridad" icon="shield-halved">
    Tests, validaciÃ³n y revisiÃ³n
    
    Despliegue controlado
  </Card>
</CardGroup>

## Arquitectura del Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DESARROLLO                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Git Push      â”‚
         â”‚  (main branch) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GITHUB ACTIONS WORKFLOW                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Tests   â”‚ -> â”‚  Build   â”‚ -> â”‚   Push to    â”‚        â”‚
â”‚  â”‚  (Jest)  â”‚    â”‚  Docker  â”‚    â”‚  Docker Hub  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                          â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Actualizar Manifiesto K8s     â”‚
                  â”‚  (repositorio kubernetes/)     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Crear Pull Request   â”‚
                  â”‚   Auto-merge si pasa   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRODUCCIÃ“N (EKS)                         â”‚
â”‚                                                             â”‚
â”‚  ArgoCD detecta cambios -> Sincroniza -> Despliegue        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Repositorios

<CardGroup cols={2}>
  <Card title="Repositorios de AplicaciÃ³n" icon="code">
    **6 repositorios independientes**
    
    - `frontend/`
    - `auth-service/`
    - `game-catalog-service/`
    - `score-service/`
    - `ranking-service/`
    - `user-service/`
    
    Cada uno con su propio pipeline CI/CD
  </Card>
  
  <Card title="Repositorio GitOps" icon="cube">
    **1 repositorio centralizado**
    
    - `kubernetes/`
    
    Manifiestos K8s para todos los servicios
    
    Ãšnica fuente de verdad del estado deseado
  </Card>
</CardGroup>

## Flujo de Trabajo Completo

<Steps>
  <Step title="Developer Push">
    El desarrollador hace push a `main` en cualquier repositorio de servicio.
    
    ```bash
    git add .
    git commit -m "feat: nueva funcionalidad"
    git push origin main
    ```
  </Step>
  
  <Step title="CI Pipeline (Tests)">
    GitHub Actions ejecuta tests automÃ¡ticamente:
    
    - Tests unitarios (Jest)
    - Tests de integraciÃ³n
    - AnÃ¡lisis de cobertura (Codecov)
    - Linting y validaciÃ³n
    
    Si fallan los tests, el pipeline se detiene.
  </Step>
  
  <Step title="Build & Push (Docker)">
    Si los tests pasan, se construye la imagen Docker:
    
    - Genera versiÃ³n semÃ¡ntica: `v1.0.X`
    - Construye imagen multi-arch
    - Push a Docker Hub con tags:
      - `latest`
      - `v1.0.X` (versiÃ³n)
      - `sha-XXXXXX` (commit SHA)
  </Step>
  
  <Step title="Update Manifest (GitOps)">
    El workflow actualiza el repositorio `kubernetes/`:
    
    - Clona el repo de manifiestos
    - Actualiza la imagen en el YAML correspondiente
    - Crea un Pull Request automÃ¡tico
    - El PR incluye versiÃ³n, SHA y link al commit
  </Step>
  
  <Step title="Review & Merge (Opcional)">
    El PR puede:
    
    - **Auto-merge**: Si tiene label `auto-merge`
    - **Manual review**: Para cambios crÃ­ticos
    
    Una vez merged, ArgoCD detecta el cambio.
  </Step>
  
  <Step title="Deploy (ArgoCD)">
    ArgoCD sincroniza automÃ¡ticamente:
    
    - Detecta cambios en Git (cada 3 minutos)
    - Aplica los cambios en EKS
    - Rolling update sin downtime
    - Health checks automÃ¡ticos
  </Step>
</Steps>

## Beneficios del Approach GitOps

<AccordionGroup>
  <Accordion title="ðŸ” Trazabilidad Total">
    - Cada cambio registrado en Git
    - Historial completo de despliegues
    - AuditorÃ­a y compliance
    - Rollback fÃ¡cil (git revert)
  </Accordion>
  
  <Accordion title="ðŸ”’ Seguridad Mejorada">
    - Credenciales nunca en CI/CD
    - ArgoCD pull desde Git (no push)
    - RBAC granular en Kubernetes
    - RevisiÃ³n de cÃ³digo obligatoria
  </Accordion>
  
  <Accordion title="ðŸš€ Velocidad de Despliegue">
    - Pipeline completo: ~5-8 minutos
    - Zero-downtime deployments
    - Rollback instantÃ¡neo
    - MÃºltiples despliegues por dÃ­a
  </Accordion>
  
  <Accordion title="ðŸŽ¯ Consistencia">
    - Mismo proceso para todos los servicios
    - Ambiente reproducible
    - Infra as Code
    - Disaster recovery simplificado
  </Accordion>
</AccordionGroup>

## Herramientas Utilizadas

<Table>
  <thead>
    <tr>
      <th>Herramienta</th>
      <th>PropÃ³sito</th>
      <th>Estado</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>**GitHub Actions**</td>
      <td>CI/CD Pipeline</td>
      <td>âœ… Implementado</td>
    </tr>
    <tr>
      <td>**Docker Hub**</td>
      <td>Registry de imÃ¡genes</td>
      <td>âœ… Implementado</td>
    </tr>
    <tr>
      <td>**Codecov**</td>
      <td>Cobertura de tests</td>
      <td>âœ… Implementado</td>
    </tr>
    <tr>
      <td>**ArgoCD**</td>
      <td>GitOps deployment</td>
      <td>ðŸš§ Planeado</td>
    </tr>
    <tr>
      <td>**GitHub Container Registry**</td>
      <td>Registry alternativo</td>
      <td>âœ… Configurado</td>
    </tr>
    <tr>
      <td>**Renovate Bot**</td>
      <td>ActualizaciÃ³n de dependencias</td>
      <td>ðŸ“‹ Futuro</td>
    </tr>
  </tbody>
</Table>

## MÃ©tricas de Pipeline

<CardGroup cols={2}>
  <Card title="Tiempo de Pipeline" icon="clock">
    **5-8 minutos**
    
    - Tests: 2-3 min
    - Build: 2-3 min
    - Update manifest: 1-2 min
  </Card>
  
  <Card title="Frecuencia de Despliegue" icon="chart-line">
    **~10 deploys/dÃ­a**
    
    Pipeline ejecutado en cada push a main
  </Card>
  
  <Card title="Tasa de Ã‰xito" icon="check">
    **~95%**
    
    Fallos principalmente por tests
  </Card>
  
  <Card title="Rollback Time" icon="rotate-left">
    **< 2 minutos**
    
    Git revert + sync automÃ¡tico
  </Card>
</CardGroup>

## Seguridad en CI/CD

### Secrets Management

Los secrets se gestionan exclusivamente en GitHub Secrets:

<CodeGroup>
```yaml Secrets por Repositorio
# Cada repositorio de servicio necesita:
DOCKERHUB_USERNAME    # Usuario de Docker Hub
DOCKERHUB_TOKEN       # Token de acceso (no password)
K8S_UPDATE_TOKEN      # PAT para actualizar repo kubernetes/
CODECOV_TOKEN         # Token de Codecov (opcional)
```

```yaml Secrets del Repo Kubernetes
# Repositorio kubernetes/ necesita:
ARGOCD_TOKEN          # Para ArgoCD (futuro)
KUBECONFIG            # Para validaciÃ³n en CI
```
</CodeGroup>

<Warning>
  Nunca commitear secrets en Git. Usar siempre GitHub Secrets o herramientas como Sealed Secrets en Kubernetes.
</Warning>

### Best Practices Implementadas

- âœ… Tests obligatorios antes de build
- âœ… AnÃ¡lisis de vulnerabilidades (Docker Scout)
- âœ… ImÃ¡genes firmadas digitalmente
- âœ… SBOM (Software Bill of Materials)
- âœ… Escaneo de secrets en cÃ³digo (git-secrets)
- âœ… Dependabot para updates de dependencias

## Monitoreo del Pipeline

### GitHub Actions Dashboard

Accede a:
```
https://github.com/retrogamecloud/<repo>/actions
```

Cada workflow muestra:
- Estado (success/failure/pending)
- DuraciÃ³n
- Logs detallados
- Artefactos generados

### Badges en README

Cada repositorio muestra badges de estado:

```markdown
[![CI](https://github.com/retrogamecloud/frontend/actions/workflows/docker-publish-and-update-k8s.yml/badge.svg)](https://github.com/retrogamecloud/frontend/actions)
[![codecov](https://codecov.io/gh/retrogamecloud/frontend/branch/main/graph/badge.svg)](https://codecov.io/gh/retrogamecloud/frontend)
```

## PrÃ³ximos Pasos

<CardGroup cols={2}>
  <Card title="GitHub Actions" icon="github" href="/cicd/github-actions">
    Detalles de workflows y configuraciÃ³n
  </Card>
  
  <Card title="GitOps Workflow" icon="code-branch" href="/cicd/gitops-workflow">
    Flujo GitOps completo con ejemplos
  </Card>
  
  <Card title="Monitoreo" icon="chart-line" href="/infrastructure/monitoring">
    Observabilidad del sistema
  </Card>
  
  <Card title="Servicios" icon="cubes" href="/services/auth-service">
    DocumentaciÃ³n de microservicios
  </Card>
</CardGroup>
