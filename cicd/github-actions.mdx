---
title: GitHub Actions Workflows
sidebarTitle: 7.2. GitHub Actions
description: Pipelines CI/CD automatizados para build, test, deploy y rollback
icon: github
---

## Visi√≥n General

Retro Game Hub utiliza **GitHub Actions** como sistema de CI/CD para automatizar el ciclo completo de desarrollo: linting, testing, build de im√°genes Docker, publicaci√≥n a registros, actualizaci√≥n de manifiestos Kubernetes y despliegues con ArgoCD.

<CardGroup cols={2}>
  <Card title="Backend CI/CD" icon="server">
    Build, test, Docker publish y actualizaci√≥n autom√°tica de K8s
  </Card>
  <Card title="Frontend CI/CD" icon="display">
    Linting, build, publicaci√≥n y PR a repositorio kubernetes
  </Card>
  <Card title="Infrastructure Validation" icon="cloud">
    Validaci√≥n de Terraform, escaneo de seguridad Trivy
  </Card>
  <Card title="Kubernetes CI" icon="dharmachakra">
    Validaci√≥n de manifiestos y an√°lisis de seguridad
  </Card>
</CardGroup>

## Backend: CI/CD Pipeline Completo

**Archivo**: `backend/.github/workflows/docker-publish-and-update-k8s.yml`

Pipeline completo para el backend unificado Node.js/Express con 8 jobs secuenciales:

### Triggers

```yaml
on:
  push:
    branches: [main]
    paths-ignore: ['**.md', '.gitignore']
    tags: ['v*.*.*']
  pull_request:
    branches: [main]
  workflow_dispatch:
    inputs:
      tag:
        description: 'Tag personalizado (ej: v1.0.75)'
        required: false
```

- **Push a main**: Despliega autom√°ticamente cambios de c√≥digo
- **Tags sem√°nticos**: Triggers en tags `v*.*.*` (ej: v1.0.75)
- **Pull Requests**: Ejecuta tests y validaci√≥n
- **Manual dispatch**: Permite ejecuci√≥n manual con tag customizado

### Jobs del Pipeline

<Steps>
  <Step title="1. ESLint y Prettier">
    **Job**: `eslint-prettier`
    
    Verificaci√≥n de calidad de c√≥digo:
    - Ejecuta ESLint para detectar errores de sintaxis y estilo
    - Ejecuta Prettier para verificar formato de c√≥digo
    - Continue-on-error: No bloquea el pipeline, solo advierte
    - Genera resumen con warnings si hay problemas
    
    ```bash
    npm ci
    npm run lint
    npm run format:check
    ```
  </Step>

  <Step title="2. Detecci√≥n de Cambios">
    **Job**: `check-changes`
    
    Decide si ejecutar tests bas√°ndose en:
    - Mensaje del commit contiene `[no-test]` o `[skip-tests]` ‚Üí Skip tests
    - Solo cambios en archivos `.md`, `.txt`, docs, `.gitignore` ‚Üí Skip tests
    - Cambios en c√≥digo fuente ‚Üí Ejecutar tests
    
    Output: `should-test=true/false`
  </Step>

  <Step title="3. Tests Unitarios">
    **Job**: `tests`
    
    Ejecuta tests si `should-test=true`:
    - Levanta PostgreSQL en Docker para tests de integraci√≥n
    - Instala dependencias con `npm ci`
    - Ejecuta `npm test` con Jest
    - Genera reporte de cobertura
    - Sube resultados a GitHub Actions artifacts
  </Step>

  <Step title="4. Build Imagen Docker">
    **Job**: `build-docker`
    
    Construye imagen Docker multi-stage:
    - Usa Dockerfile con build stages optimizados
    - Genera tag basado en SHA del commit o tag sem√°ntico
    - Build con BuildKit para cache layers
    - Tagging: `sha-abc1234`, `v1.0.75`, `latest`
  </Step>

  <Step title="5. Publicar a Registros">
    **Job**: `publish`
    
    Publica imagen a dos registros:
    - **Docker Hub**: `retrogamehub/backend:v1.0.75`
    - **GitHub Container Registry**: `ghcr.io/retrogamecloud/backend:v1.0.75`
    
    Tags publicados:
    - Tag espec√≠fico (SHA o sem√°ntico)
    - `latest` (solo en push a main)
    
    ```bash
    docker push retrogamehub/backend:v1.0.75
    docker push retrogamehub/backend:latest
    docker push ghcr.io/retrogamecloud/backend:v1.0.75
    ```
  </Step>

  <Step title="6. Actualizar Kubernetes">
    **Job**: `update-k8s`
    
    Actualiza manifiestos de Kubernetes:
    - Clona repositorio `retrogamecloud/kubernetes`
    - Actualiza `02-backend.yaml` con nueva imagen
    - Commit y push a `main` con `[skip ci]`
    - ArgoCD detecta cambio y despliega autom√°ticamente
    
    ```yaml
    # Cambio en 02-backend.yaml
    spec:
      containers:
      - name: backend
        image: retrogamehub/backend:sha-abc1234
    ```
  </Step>

  <Step title="7. Escaneo de Seguridad (Opcional)">
    **Job**: `snyk-security`
    
    Escanea vulnerabilidades con Snyk (si `ENABLE_SNYK=true`):
    - Escanea dependencias NPM
    - Escanea imagen Docker construida
    - Reporta vulnerabilidades cr√≠ticas/altas
    - No bloquea pipeline, solo informa
  </Step>

  <Step title="8. Notificaciones Slack (Opcional)">
    **Job**: `slack-notification`
    
    Env√≠a notificaci√≥n a Slack con:
    - Estado del pipeline (success/failure)
    - Tag de imagen desplegada
    - Link al workflow run
    - Link al commit
  </Step>
</Steps>

### Variables de Entorno

```yaml
env:
  REGISTRY_GHCR: ghcr.io
  REGISTRY_DOCKERHUB: docker.io
  DOCKERHUB_ORG: retrogamehub
  K8S_REPO: retrogamecloud/kubernetes
  K8S_MANIFEST_FILE: 02-backend.yaml
  ENABLE_SNYK: false
  ENABLE_SLACK_NOTIFICATIONS: true
```

### Secrets Requeridos

- `DOCKERHUB_USERNAME`: Usuario de Docker Hub
- `DOCKERHUB_TOKEN`: Token de acceso Docker Hub
- `GHCR_TOKEN`: Token GitHub Container Registry
- `K8S_UPDATE_TOKEN`: PAT con permisos al repo kubernetes
- `SNYK_TOKEN`: Token Snyk (opcional)
- `SLACK_WEBHOOK_URL`: Webhook Slack (opcional)

## Backend: Rollback Workflow

**Archivo**: `backend/.github/workflows/rollback-backend.yml`

Workflow manual para hacer rollback del backend a una versi√≥n anterior:

### Ejecuci√≥n Manual

```yaml
workflow_dispatch:
  inputs:
    version:
      description: 'Versi√≥n o tag de imagen a restaurar (ej: v1.0.123 o sha-abc1234)'
      required: true
    reason:
      description: 'Raz√≥n del rollback'
      required: true
    emergency:
      description: 'Rollback de emergencia (auto-merge sin PR para ArgoCD)'
      type: boolean
      default: false
```

### Proceso de Rollback

<Tabs>
  <Tab title="Rollback Normal">
    **Modo Normal** (`emergency=false`):
    
    1. Valida que la imagen existe en Docker Hub
    2. Clona repositorio `kubernetes`
    3. Crea branch `rollback/backend-v1.0.123-<timestamp>`
    4. Actualiza `02-backend.yaml` con imagen anterior
    5. Crea Pull Request para revisi√≥n
    6. Requiere aprobaci√≥n manual
    7. Merge ‚Üí ArgoCD despliega
    
    **Uso**: Rollbacks planificados con revisi√≥n
  </Tab>
  
  <Tab title="Rollback Emergencia">
    **Modo Emergencia** (`emergency=true`):
    
    1. Valida que la imagen existe en Docker Hub
    2. Clona repositorio `kubernetes`
    3. **Commit directo a main** sin PR
    4. Push con mensaje `[skip ci]`
    5. ArgoCD detecta y despliega inmediatamente (< 3 minutos)
    
    **Uso**: Incidentes cr√≠ticos en producci√≥n
    
    <Warning>
      **Cuidado**: El rollback de emergencia bypassa revisi√≥n. Usar solo en incidentes P0/P1.
    </Warning>
  </Tab>
</Tabs>

### Ejemplo de Uso

```bash
# Desde GitHub UI: Actions ‚Üí Rollback Backend ‚Üí Run workflow

# Inputs:
# version: v1.0.120
# reason: "Bug cr√≠tico en autenticaci√≥n JWT causa 500 errors"
# emergency: true  # Para despliegue inmediato

# Resultado: Backend restaurado a v1.0.120 en < 3 minutos
```

## Frontend: CI/CD Pipeline

**Archivo**: `frontend/.github/workflows/cicd.yml`

Pipeline similar al backend pero adaptado al frontend:

### Diferencias Clave

<CardGroup cols={2}>
  <Card title="Linting Frontend" icon="code">
    - ESLint para JavaScript vanilla
    - Prettier para HTML/CSS/JS
    - Validaci√≥n de sintaxis
  </Card>
  
  <Card title="Build Frontend" icon="box">
    - Dockerfile optimizado para Node.js Express
    - Archivos est√°ticos HTML/CSS/JS incluidos
    - js-dos integrado en imagen
  </Card>
  
  <Card title="Tests Frontend" icon="vial">
    - Tests de servidor Express (si existen)
    - Validaci√≥n de estructura de archivos
    - Sin tests de integraci√≥n complejos
  </Card>
  
  <Card title="Deploy Frontend" icon="rocket">
    - Actualiza `04-frontend.yaml` en kubernetes repo
    - Tag: `retrogamehub/frontend:sha-xyz`
    - ArgoCD despliega autom√°ticamente
  </Card>
</CardGroup>

### Manifiesto Actualizado

```yaml
# 04-frontend.yaml
spec:
  containers:
  - name: frontend
    image: retrogamehub/frontend:sha-def5678
    ports:
    - containerPort: 8080
```

## Frontend: Rollback Workflow

**Archivo**: `frontend/.github/workflows/rollback-frontend.yml`

Workflow manual para rollback del frontend (solo modo PR, sin emergencia):

### Ejecuci√≥n Manual

```yaml
workflow_dispatch:
  inputs:
    version:
      description: 'Versi√≥n o tag de imagen a restaurar (ej: v1.0.123 o sha-abc1234)'
      required: true
    reason:
      description: 'Raz√≥n del rollback'
      required: true
```

<Note>
  **Diferencia con Backend**: El frontend NO tiene modo emergencia. Todos los rollbacks requieren PR y aprobaci√≥n manual.
</Note>

### Proceso de Rollback

1. Valida que la imagen existe en Docker Hub
2. Clona repositorio `kubernetes`
3. Actualiza **dos manifiestos**:
   - `04-frontend.yaml` (manifiesto K8s base)
   - `argocd/base/frontend-deployment.yaml` (manifiesto ArgoCD)
4. Crea branch `rollback/frontend-v1.0.123-<timestamp>`
5. Crea Pull Request con label `rollback` y `urgent`
6. **Requiere aprobaci√≥n manual**
7. Merge ‚Üí ArgoCD sincroniza y despliega

### Ejemplo de Uso

```bash
# Desde GitHub UI: Actions ‚Üí Rollback Frontend ‚Üí Run workflow

# Inputs:
# version: v1.0.95
# reason: "CSS roto en games.html, p√°gina no carga"

# Resultado:
# - PR creado autom√°ticamente
# - Requiere aprobaci√≥n de mantenedor
# - Una vez aprobado, ArgoCD despliega en ~3 minutos
```

### ¬øPor qu√© No Tiene Modo Emergencia?

El frontend es **menos cr√≠tico** que el backend:
- No maneja autenticaci√≥n
- No tiene base de datos
- Fallas no causan p√©rdida de datos
- El tiempo de revisi√≥n (5-10 min) es aceptable

## Kubernetes: Validaci√≥n de Manifiestos

**Archivo**: `kubernetes/.github/workflows/ci.yml`

Pipeline para validar manifiestos YAML antes de despliegue:

### Jobs de Validaci√≥n

<Steps>
  <Step title="kubectl Dry-run Validation">
    Valida sintaxis de manifiestos:
    - Levanta cluster Kind local
    - Ejecuta `kubectl apply --dry-run=client` en todos los YAMLs
    - Detecta errores de sintaxis, campos inv√°lidos, referencias rotas
    
    ```bash
    kubectl apply --dry-run=client -f 02-backend.yaml
    kubectl apply --dry-run=client -f 03-kong.yaml
    kubectl apply --dry-run=client -f 04-frontend.yaml
    ```
  </Step>
  
  <Step title="Trivy Security Scan">
    Escanea vulnerabilidades en configuraciones:
    - Analiza manifiestos Kubernetes con Trivy
    - Detecta: privileged containers, missing securityContext, exposed secrets
    - Severidad: CRITICAL, HIGH, MEDIUM
    - Sube resultados a GitHub Security
    
    ```bash
    trivy config . --severity CRITICAL,HIGH,MEDIUM --format sarif
    ```
  </Step>
  
  <Step title="Kubesec Security Analysis">
    An√°lisis de seguridad con Kubesec:
    - Punt√∫a manifiestos (0-100)
    - Detecta: runAsNonRoot missing, capabilities no dropeadas, readOnlyRootFilesystem
    - Recomendaciones de hardening
    
    ```bash
    kubesec scan 02-backend.yaml
    ```
  </Step>
  
  <Step title="Kustomize Build Test">
    Valida overlays de Kustomize (si existen):
    - Ejecuta `kustomize build` en directorios overlay
    - Verifica que patches se aplican correctamente
    - Detecta referencias rotas
  </Step>
</Steps>

### GitHub Security Integration

Los resultados de Trivy y Kubesec se suben a **GitHub Security** ‚Üí **Code scanning alerts**:

- Alertas autom√°ticas en PRs
- Dashboard centralizado de vulnerabilidades
- Tracking de remediaci√≥n

## Infrastructure: Validaci√≥n de Terraform

**Archivo**: `infrastructure/.github/workflows/validate-and-scan.yml`

Pipeline para validar c√≥digo de Terraform:

### Validaci√≥n de Terraform

<Steps>
  <Step title="Terraform Format">
    Verifica formato de c√≥digo:
    ```bash
    terraform fmt -check -recursive
    ```
    Falla si archivos no est√°n formateados correctamente
  </Step>
  
  <Step title="Terraform Init">
    Inicializa providers y m√≥dulos:
    ```bash
    cd terraform/bootstrap && terraform init
    cd terraform/ && terraform init
    ```
  </Step>
  
  <Step title="Terraform Validate">
    Valida sintaxis y referencias:
    ```bash
    terraform validate
    ```
    Detecta:
    - Variables no declaradas
    - Recursos con sintaxis incorrecta
    - Referencias rotas entre m√≥dulos
  </Step>
  
  <Step title="Terraform Plan">
    Genera plan de cambios:
    ```bash
    terraform plan -out=tfplan
    ```
    Muestra qu√© recursos se crear√°n/modificar√°n/destruir√°n
  </Step>
</Steps>

### Escaneo de Seguridad

<CardGroup cols={2}>
  <Card title="Trivy IaC Scan" icon="shield">
    Escanea Terraform con Trivy:
    - Detecta: security groups abiertos, IAM policies permisivas
    - Analiza: m√≥dulos, variables, outputs
    - Severidad: CRITICAL, HIGH, MEDIUM
  </Card>
  
  <Card title="Checkov" icon="check">
    An√°lisis de compliance:
    - Verifica: encryption at rest, public access
    - CIS AWS Foundations Benchmark
    - HIPAA, PCI-DSS compliance checks
  </Card>
</CardGroup>

### Validaci√≥n de ArgoCD Manifests

Valida configuraciones de ArgoCD:

```bash
# Validar applications
kubectl apply --dry-run=client -f argocd/applications/backend.yaml

# Validar estructura
cat argocd/applications/backend.yaml | yq eval '.spec.source.repoURL'
```

## Docs: Revisi√≥n Inteligente de Documentaci√≥n

**Archivo**: `docs/.github/workflows/intelligent-docs-review.yml`

Workflow automatizado que analiza y reorganiza la documentaci√≥n usando IA:

### Triggers

```yaml
on:
  push:
    branches: [main]
    paths: ['**.mdx', 'docs.json']
  schedule:
    - cron: '0 0 * * *'  # Diariamente a medianoche
  workflow_dispatch:
```

### Proceso Inteligente

<Steps>
  <Step title="1. Clonar Repos Fuente">
    Clona todos los repositorios para an√°lisis:
    ```bash
    git clone backend frontend kong infrastructure kubernetes
    ```
    Analiza READMEs, c√≥digo, configuraciones
  </Step>
  
  <Step title="2. Auto-fix Quick Wins">
    Correcciones autom√°ticas:
    - Links rotos ‚Üí actualizados
    - Formato inconsistente ‚Üí corregido
    - Duplicados detectados ‚Üí eliminados
    
    Script: `.github/scripts/auto-fix-quick-wins.py`
  </Step>
  
  <Step title="3. Validar Links">
    Valida todos los links:
    - Links internos entre MDX files
    - Links externos (HTTP status)
    - Anchors dentro de documentos
    
    Script: `.github/scripts/validate-links.py`
  </Step>
  
  <Step title="4. An√°lisis con Claude AI">
    Usa Claude Sonnet 4 para analizar:
    - Documentaci√≥n obsoleta vs c√≥digo real
    - Gaps en la documentaci√≥n
    - Informaci√≥n incorrecta o desactualizada
    - Estructura de navegaci√≥n sub√≥ptima
    
    Script: `.github/scripts/intelligent-doc-analyzer.py`
    
    Output: `IMPROVEMENTS.md` con recomendaciones
  </Step>
  
  <Step title="5. Reorganizaci√≥n Autom√°tica">
    Reorganiza `docs.json`:
    - Agrupa secciones relacionadas
    - Elimina duplicados
    - Optimiza orden de navegaci√≥n
    - Actualiza links autom√°ticamente
    
    Script: `.github/scripts/reorganize-docs-structure.py`
    
    Output: `STRUCTURE_CHANGELOG.md`
  </Step>
  
  <Step title="6. Crear Pull Request">
    Crea PR con cambios:
    - Branch: `auto/docs-improvements-<timestamp>`
    - Incluye: fixes, reorganizaci√≥n, an√°lisis
    - Label: `documentation`, `automated`
    - Asigna a mantenedores para revisi√≥n
  </Step>
</Steps>

### An√°lisis Diario

Cada noche a las 00:00 UTC:

1. Workflow se ejecuta autom√°ticamente
2. Analiza todos los 88+ archivos MDX
3. Compara con c√≥digo fuente actual de repos
4. Detecta discrepancias y genera PR si hay cambios
5. Env√≠a notificaci√≥n si se encuentra contenido obsoleto

### Profundidad de An√°lisis

```yaml
workflow_dispatch:
  inputs:
    analysis_depth:
      options: [quick, full, deep]
```

- **Quick**: Solo links rotos y formato
- **Full**: An√°lisis completo con IA (default)
- **Deep**: An√°lisis exhaustivo + generaci√≥n de diagramas

## Kubernetes: Limpieza de Branches Antiguas

**Archivo**: `kubernetes/.github/workflows/delete-old-branchs.yml`

Limpia branches de PRs mergeadas autom√°ticamente:

### Ejecuci√≥n

```yaml
on:
  schedule:
    - cron: '0 2 * * 0'  # Domingos a las 2 AM
  workflow_dispatch:
```

### Proceso

1. Lista todas las branches remotas
2. Identifica branches de PRs mergeadas:
   - `auto/*` (generadas por workflows)
   - `rollback/*` (rollbacks completados)
   - Branches con PR mergeado hace > 7 d√≠as
3. Elimina branches autom√°ticamente
4. Genera reporte de branches eliminadas

### Exclusiones

Nunca elimina:
- `main`, `develop`, `staging`
- Branches con PRs abiertos
- Branches con commits recientes (< 7 d√≠as)

## Documentaci√≥n: Intelligent Docs Review

**Archivo**: `docs/.github/workflows/intelligent-docs-review.yml`

Workflow automatizado para revisar cambios en la documentaci√≥n utilizando **GitHub Copilot** para an√°lisis inteligente de calidad, consistencia y precisi√≥n t√©cnica.

### Triggers

```yaml
on:
  pull_request:
    paths:
      - '**.mdx'
      - '**.md'
      - 'docs.json'
      - 'mint.json'
```

Se ejecuta autom√°ticamente cuando:
- Se crea o actualiza un Pull Request
- Los cambios afectan archivos de documentaci√≥n (`.mdx`, `.md`)
- Se modifican archivos de configuraci√≥n (`docs.json`, `mint.json`)

### Proceso del Workflow

#### 1. Setup y Checkout
```yaml
- uses: actions/checkout@v4
  with:
    fetch-depth: 0  # Hist√≥rico completo para diff
```

Clona el repositorio completo incluyendo el historial para poder comparar cambios.

#### 2. An√°lisis Inteligente con GitHub Copilot

```yaml
- uses: copilot-docs-review@v1
  with:
    review-type: 'comprehensive'
    check-grammar: true
    check-consistency: true
    check-technical-accuracy: true
```

**GitHub Copilot analiza**:

<AccordionGroup>
  <Accordion title="Gram√°tica y Estilo" icon="spell-check">
    - Ortograf√≠a y gram√°tica en espa√±ol
    - Consistencia en terminolog√≠a t√©cnica
    - Claridad y legibilidad del contenido
    - Uso correcto de may√∫sculas y puntuaci√≥n
  </Accordion>

  <Accordion title="Consistencia T√©cnica" icon="code">
    - Comandos y ejemplos de c√≥digo funcionales
    - Rutas de archivos correctas
    - Referencias a servicios existentes
    - Coherencia con la arquitectura real
  </Accordion>

  <Accordion title="Estructura y Formato" icon="sitemap">
    - Formato MDX v√°lido (frontmatter, componentes)
    - Jerarqu√≠a de headings correcta
    - Links internos y externos v√°lidos
    - Bloques de c√≥digo con sintaxis correcta
  </Accordion>

  <Accordion title="Precisi√≥n de Contenido" icon="bullseye">
    - Informaci√≥n t√©cnica actualizada
    - Configuraciones y versiones correctas
    - Procedimientos paso a paso completos
    - Advertencias de seguridad relevantes
  </Accordion>
</AccordionGroup>

#### 3. Generaci√≥n de Comentarios

El workflow genera comentarios autom√°ticos en el PR con:

**Formato del comentario**:
```markdown
## üìö Intelligent Docs Review

### ‚úÖ Validaciones Exitosas
- Sintaxis MDX v√°lida
- Links internos correctos
- Estructura de archivos consistente

### ‚ö†Ô∏è Sugerencias de Mejora
- **archivo.mdx:45** - Considerar a√±adir ejemplo de c√≥digo
- **otro.mdx:23** - Verificar versi√≥n de dependencia mencionada

### üîç Observaciones T√©cnicas
- Detectado cambio en arquitectura (microservicios ‚Üí backend unificado)
- Actualizar referencias en archivos relacionados
```

#### 4. Status Check

El workflow establece un status check en el PR:

- ‚úÖ **Success**: Documentaci√≥n pasa todas las validaciones
- ‚ö†Ô∏è **Warning**: Sugerencias opcionales detectadas
- ‚ùå **Failure**: Errores cr√≠ticos encontrados (sintaxis, links rotos)

### Configuraci√≥n del Workflow

#### Secretos Requeridos

```bash
# GitHub token autom√°tico (no requiere configuraci√≥n)
GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

El token se proporciona autom√°ticamente por GitHub Actions con permisos:
- `pull-requests: write` - Comentar en PRs
- `contents: read` - Leer archivos del repositorio

#### Variables de Entorno

```yaml
env:
  NODE_ENV: production
  DOCS_PATH: ./
  REVIEW_LEVEL: comprehensive  # basic | standard | comprehensive
```

### Niveles de Review

<CardGroup cols={3}>
  <Card title="Basic" icon="1">
    **Validaciones r√°pidas**
    - Sintaxis MDX
    - Links rotos
    - Formato b√°sico
    
    **Tiempo**: ~30s
  </Card>
  
  <Card title="Standard" icon="2">
    **An√°lisis medio**
    - Basic +
    - Gram√°tica
    - Consistencia terminol√≥gica
    
    **Tiempo**: ~1-2 min
  </Card>
  
  <Card title="Comprehensive" icon="3">
    **An√°lisis completo**
    - Standard +
    - Precisi√≥n t√©cnica
    - Sugerencias de mejora
    - An√°lisis contextual
    
    **Tiempo**: ~2-5 min
  </Card>
</CardGroup>

### Ejemplo de Uso en PR

1. **Desarrollador crea PR** con cambios en documentaci√≥n:
   ```bash
   git checkout -b docs/update-architecture
   # Editar architecture.mdx
   git add architecture.mdx
   git commit -m "docs: Actualizar diagrama de arquitectura"
   git push origin docs/update-architecture
   ```

2. **Workflow se ejecuta autom√°ticamente**:
   - Analiza `architecture.mdx`
   - Detecta cambios en diagramas Mermaid
   - Valida sintaxis y referencias

3. **Copilot comenta en el PR**:
   ```markdown
   ## üìö Review: architecture.mdx
   
   ‚úÖ Sintaxis Mermaid v√°lida
   ‚ö†Ô∏è L√≠nea 45: Considerar a√±adir leyenda al diagrama
   üí° Sugerencia: Mencionar alta disponibilidad multi-AZ
   ```

4. **Desarrollador responde**:
   - Aplica sugerencias
   - Push adicional ‚Üí workflow re-ejecuta
   - Aprobaci√≥n final ‚Üí merge

### Beneficios

<Card title="Ventajas del Intelligent Docs Review" icon="star">
  - **Calidad Consistente**: Mantiene est√°ndares en toda la documentaci√≥n
  - **Detecci√≥n Temprana**: Identifica errores antes del merge
  - **Ahorro de Tiempo**: Revisiones automatizadas liberan tiempo de reviewers
  - **Aprendizaje Continuo**: Sugerencias educativas para el equipo
  - **Documentaci√≥n Actualizada**: Detecta informaci√≥n obsoleta autom√°ticamente
</Card>

### Integraci√≥n con Mintlify

El workflow valida espec√≠ficamente:

```yaml
mintlify-specific:
  - Frontmatter v√°lido (title, description, icon)
  - SidebarTitle con numeraci√≥n correcta (1.1, 2.3, etc.)
  - Componentes Mintlify (<Card>, <Accordion>, <CodeGroup>)
  - Configuraci√≥n docs.json/mint.json v√°lida
  - Paths en navigation correctos
```

### Bypass del Review (casos especiales)

Para saltarse el review en commits menores:

```bash
git commit -m "docs: Fix typo [skip review]"
```

A√±adir `[skip review]` en el mensaje del commit omite el workflow.

### M√©tricas y Monitoreo

El workflow genera m√©tricas accesibles en GitHub Actions:

- **Success Rate**: % de PRs que pasan sin errores
- **Average Review Time**: Tiempo promedio de an√°lisis
- **Common Issues**: Tipos de errores m√°s frecuentes
- **Files Modified**: Archivos m√°s editados

### Troubleshooting

#### Review Falla Inesperadamente

```bash
# Verificar sintaxis MDX localmente
npx prettier --check "**/*.mdx"

# Validar frontmatter
grep -r "^---$" *.mdx
```

#### Comentarios No Aparecen en PR

Verificar permisos en `.github/workflows/intelligent-docs-review.yml`:

```yaml
permissions:
  contents: read
  pull-requests: write  # Requerido para comentar
```

#### An√°lisis Muy Lento

Reducir nivel de review:

```yaml
with:
  review-level: 'standard'  # En vez de comprehensive
```

### Referencias

- [GitHub Copilot for Docs](https://github.com/features/copilot)
- [Mintlify Documentation](https://mintlify.com/docs)
- [MDX Specification](https://mdxjs.com/)

## Mejores Pr√°cticas

### Concurrency Control

Todos los workflows usan concurrency para evitar ejecuciones paralelas:

```yaml
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

Si se hace push mientras el workflow corre, cancela el anterior.

### Skip CI

Para commits que no requieren CI:

```bash
git commit -m "docs: actualizar README [skip ci]"
```

Patrones que skipean CI:
- `[skip ci]`, `[ci skip]`, `[no ci]`
- Solo cambios en `**.md`, `.gitignore`

### Secrets Management

Secrets almacenados en **GitHub Settings ‚Üí Secrets and variables ‚Üí Actions**:

- `DOCKERHUB_USERNAME`, `DOCKERHUB_TOKEN`
- `GHCR_TOKEN` (GitHub PAT con `write:packages`)
- `K8S_UPDATE_TOKEN` (PAT con `repo` scope)
- `PAT_TOKEN` (PAT para clonar repos privados)
- `SNYK_TOKEN` (opcional)
- `SLACK_WEBHOOK_URL` (opcional)

### Permisos M√≠nimos

Workflows usan **permisos m√≠nimos** por defecto:

```yaml
permissions:
  contents: read  # Solo lectura por defecto

jobs:
  build:
    permissions:
      contents: read
      packages: write  # Solo cuando necesita publicar
```

### Artifacts y Cache

- **Cache NPM**: Acelera instalaci√≥n de dependencias
  ```yaml
  uses: actions/setup-node@v6
  with:
    cache: 'npm'
  ```

- **Artifacts**: Resultados de tests, reportes de seguridad
  ```yaml
  uses: actions/upload-artifact@v4
  with:
    name: coverage-report
    path: coverage/
  ```

## Monitoreo de Workflows

### GitHub Actions Dashboard

Accede a: `https://github.com/RetroGameCloud/<repo>/actions`

- Ver estado de workflows en tiempo real
- Logs detallados de cada job
- Re-ejecutar workflows fallidos
- Cancelar workflows en progreso

### Notificaciones

Configura notificaciones en **Settings ‚Üí Notifications**:

- Email en workflow failures
- Slack/Discord webhooks
- GitHub mobile app notifications

### M√©tricas

GitHub Actions proporciona m√©tricas:

- Duraci√≥n promedio de workflows
- Success rate
- Uso de minutos de CI/CD
- Concurrency limits

## Troubleshooting

### Workflow Falla en Tests

```bash
# Verificar logs
gh run view <run-id> --log

# Re-ejecutar solo job fallido
gh run rerun <run-id> --job <job-id>

# Ejecutar tests localmente
npm test
```

### Imagen Docker No Publica

Verificar:
1. Secrets `DOCKERHUB_TOKEN` y `GHCR_TOKEN` v√°lidos
2. Permisos `packages: write` en job
3. Nombre de imagen correcto (`retrogamehub/<service>`)
4. Autenticaci√≥n exitosa antes de push

### Kubernetes Update Falla

Verificar:
1. `K8S_UPDATE_TOKEN` tiene scope `repo`
2. Token no expirado
3. Repositorio `kubernetes` existe
4. Branch `main` no protegido (o bypass con PAT de admin)

### ArgoCD No Sincroniza

Verificar:
1. Commit tiene mensaje `[skip ci]` para evitar loops
2. ArgoCD Application configurada con `automated: {}`
3. Polling interval (default 3 minutos)
4. Logs de ArgoCD: `kubectl logs -n argocd deployment/argocd-application-controller`

## Referencias

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Docker Build Push Action](https://github.com/docker/build-push-action)
- [Trivy Action](https://github.com/aquasecurity/trivy-action)
- [ArgoCD GitOps](https://argo-cd.readthedocs.io/)
