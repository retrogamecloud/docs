{
  "analysis_summary": "La documentación está bien estructurada pero presenta gaps críticos: falta documentación de seguridad y DR, los diagramas de arquitectura son insuficientes, hay inconsistencias en nomenclatura (Retro Game Hub vs RetroGameCloud), y faltan guías operativas para producción. Score general: 7.5/10.",
  "overall_score": 7.5,
  "improvements": [
    {
      "priority": "high",
      "category": "content",
      "title": "Documentación de Seguridad Completa",
      "description": "Falta documentación crítica sobre seguridad: políticas de secretos, gestión de credenciales en K8s, rotación de tokens JWT, hardening de contenedores, políticas de red, y escaneo de vulnerabilidades. Es fundamental para producción.",
      "files_to_create": [
        "security/overview.mdx",
        "security/secrets-management.mdx",
        "security/network-policies.mdx",
        "security/container-security.mdx",
        "security/jwt-best-practices.mdx"
      ],
      "files_to_modify": [
        "architecture.mdx",
        "deployment.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "# Seguridad en Retro Game Hub\n\n## Gestión de Secretos\n- AWS Secrets Manager para credenciales RDS\n- Kubernetes Secrets cifrados en reposo\n- Rotación automática de tokens JWT\n\n## Políticas de Red\n- Network Policies K8s entre microservicios\n- Security Groups AWS restrictivos\n- Whitelist de IPs para administración",
      "mermaid_diagram": "graph TB\n    subgraph Capa_Perimetral[Capa Perimetral]\n        CF[CloudFront WAF]\n        ALB[ALB con SSL/TLS]\n    end\n    subgraph Capa_Autenticacion[Autenticación]\n        OAuth[OAuth2 Proxy]\n        Kong[Kong JWT Plugin]\n    end\n    subgraph Capa_Aplicacion[Aplicación]\n        Auth[Auth Service]\n        Game[Game Catalog]\n        Score[Score Service]\n    end\n    subgraph Capa_Datos[Datos]\n        RDS[(RDS PostgreSQL cifrado)]\n        Redis[(Redis con AUTH)]\n    end\n    CF -->|HTTPS| ALB\n    ALB -->|mTLS| OAuth\n    OAuth --> Kong\n    Kong -->|JWT Validado| Auth\n    Kong -->|JWT Validado| Game\n    Kong -->|JWT Validado| Score\n    Auth -.->|Secrets Manager| RDS\n    Score -.->|TLS| Redis",
      "rationale": "La seguridad es crítica para producción. Sin documentación clara, los desarrolladores pueden cometer errores que expongan datos sensibles o credenciales."
    },
    {
      "priority": "high",
      "category": "content",
      "title": "Plan de Recuperación ante Desastres (DR)",
      "description": "No existe documentación sobre backups, RTO/RPO, procedimientos de restauración, o planes de continuidad. Fundamental para entornos productivos con datos críticos de usuarios.",
      "files_to_create": [
        "operations/disaster-recovery.mdx",
        "operations/backup-strategy.mdx",
        "operations/incident-response.mdx"
      ],
      "files_to_modify": [
        "deployment.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "# Plan de Recuperación ante Desastres\n\n## Objetivos\n- RTO (Recovery Time Objective): 4 horas\n- RPO (Recovery Point Objective): 1 hora\n\n## Estrategia de Backups\n- RDS: Snapshots automatizados cada hora, retención 7 días\n- Redis: AOF persistence + replicación\n- S3: Versionado habilitado + Cross-Region Replication\n\n## Procedimientos de Restauración\n1. Recuperación de Base de Datos desde snapshot\n2. Recreación de cluster EKS desde código Terraform\n3. Despliegue de servicios vía ArgoCD\n4. Validación de integridad de datos",
      "mermaid_diagram": "flowchart TD\n    Start[Detección de Incidente] --> Assess{Evaluar Severidad}\n    Assess -->|Crítico| Alert[Alertar Equipo On-Call]\n    Assess -->|Mayor| Investigate[Investigar Causa]\n    Assess -->|Menor| Log[Registrar en Sistema]\n    Alert --> Failover{¿Requiere Failover?}\n    Failover -->|Sí BD| RestoreDB[Restaurar desde Snapshot RDS]\n    Failover -->|Sí Cluster| RecreateEKS[Recrear EKS con Terraform]\n    Failover -->|Sí Servicios| RedeployServices[Redesplegar vía ArgoCD]\n    RestoreDB --> Validate[Validar Integridad]\n    RecreateEKS --> Validate\n    RedeployServices --> Validate\n    Validate --> PostMortem[Análisis Post-Mortem]\n    Investigate --> Fix[Aplicar Corrección]\n    Fix --> PostMortem\n    Log --> Monitor[Monitorizar]",
      "rationale": "Sin un plan DR documentado, la recuperación ante fallos será caótica, incrementando el downtime y posible pérdida de datos de usuarios."
    },
    {
      "priority": "high",
      "category": "diagrams",
      "title": "Diagrama de Arquitectura de Red Completo",
      "description": "El diagrama actual de arquitectura es muy básico. Falta mostrar VPCs, subnets públicas/privadas, NAT Gateways, Security Groups, y flujo de tráfico detallado.",
      "files_to_create": [
        "infrastructure/network-architecture.mdx"
      ],
      "files_to_modify": [
        "architecture.mdx",
        "infrastructure/networking.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "# Arquitectura de Red AWS\n\n## Topología de VPC\n- VPC: 10.0.0.0/16\n- Subnets públicas: 10.0.1.0/24, 10.0.2.0/24 (ALB, NAT Gateway)\n- Subnets privadas: 10.0.10.0/24, 10.0.11.0/24 (EKS Workers)\n- Subnets de datos: 10.0.20.0/24, 10.0.21.0/24 (RDS, Redis)\n\n## Security Groups\n- SG-ALB: Permite 443 desde Internet\n- SG-EKS: Permite tráfico desde ALB\n- SG-RDS: Permite 5432 solo desde EKS\n- SG-Redis: Permite 6379 solo desde EKS",
      "mermaid_diagram": "graph TB\n    subgraph Internet\n        Users[Usuarios]\n    end\n    subgraph AWS_Region[Región AWS us-east-1]\n        subgraph VPC[VPC 10.0.0.0/16]\n            subgraph AZ1[Zona Disponibilidad 1a]\n                PublicSubnet1[Subnet Pública<br/>10.0.1.0/24]\n                PrivateSubnet1[Subnet Privada<br/>10.0.10.0/24]\n                DataSubnet1[Subnet Datos<br/>10.0.20.0/24]\n            end\n            subgraph AZ2[Zona Disponibilidad 1b]\n                PublicSubnet2[Subnet Pública<br/>10.0.2.0/24]\n                PrivateSubnet2[Subnet Privada<br/>10.0.11.0/24]\n                DataSubnet2[Subnet Datos<br/>10.0.21.0/24]\n            end\n            IGW[Internet Gateway]\n            NAT1[NAT Gateway AZ1]\n            NAT2[NAT Gateway AZ2]\n            ALB[Application Load Balancer]\n            EKS1[EKS Worker Nodes]\n            EKS2[EKS Worker Nodes]\n            RDS1[(RDS Primary)]\n            RDS2[(RDS Standby)]\n            Redis1[(Redis Primary)]\n            Redis2[(Redis Replica)]\n        end\n        CF[CloudFront CDN]\n    end\n    Users -->|HTTPS| CF\n    CF -->|HTTPS| IGW\n    IGW --> PublicSubnet1\n    IGW --> PublicSubnet2\n    PublicSubnet1 --> ALB\n    PublicSubnet2 --> ALB\n    PublicSubnet1 --> NAT1\n    PublicSubnet2 --> NAT2\n    ALB -->|SG: 8080| PrivateSubnet1\n    ALB -->|SG: 8080| PrivateSubnet2\n    PrivateSubnet1 --> EKS1\n    PrivateSubnet2 --> EKS2\n    EKS1 -->|SG: 5432| DataSubnet1\n    EKS2 -->|SG: 5432| DataSubnet2\n    DataSubnet1 --> RDS1\n    DataSubnet2 --> RDS2\n    DataSubnet1 --> Redis1\n    DataSubnet2 --> Redis2\n    EKS1 -.->|Salida Internet| NAT1\n    EKS2 -.->|Salida Internet| NAT2\n    RDS1 -.->|Replicación| RDS2",
      "rationale": "Un diagrama de red detallado es esencial para entender la segmentación, troubleshooting de conectividad, y auditorías de seguridad."
    },
    {
      "priority": "high",
      "category": "quality",
      "title": "Inconsistencia en Nombres del Proyecto",
      "description": "La documentación usa indistintamente 'Retro Game Hub' y 'RetroGameCloud'. Esto confunde y resta profesionalismo. Debe estandarizarse un solo nombre en toda la documentación.",
      "files_to_create": [],
      "files_to_modify": [
        "index.mdx",
        "quickstart.mdx",
        "architecture.mdx",
        "troubleshooting.mdx",
        "configuration.mdx",
        "deployment.mdx",
        "README.md"
      ],
      "files_to_delete": [],
      "proposed_content": "Buscar y reemplazar todas las instancias de los nombres variados por un único nombre oficial. Recomendación: usar 'Retro Game Hub' en documentación de usuario y 'retrogamehub' (sin espacios, minúsculas) en código, URLs y identificadores técnicos.",
      "mermaid_diagram": "",
      "rationale": "La consistencia en branding y nomenclatura es fundamental para credibilidad y usabilidad. Los usuarios se confunden cuando ven nombres diferentes en distintas secciones."
    },
    {
      "priority": "high",
      "category": "content",
      "title": "Guía de Operaciones y Runbooks",
      "description": "Falta documentación operativa diaria: procedimientos de escalado, actualizaciones de servicios, rollback, manejo de incidentes comunes, y playbooks para operadores.",
      "files_to_create": [
        "operations/overview.mdx",
        "operations/scaling.mdx",
        "operations/updates-rollback.mdx",
        "operations/runbooks.mdx",
        "operations/on-call-guide.mdx"
      ],
      "files_to_modify": [
        "troubleshooting.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "# Guía de Operaciones\n\n## Escalado de Servicios\n\n### Escalado Horizontal (HPA)"
    }
  ]
}