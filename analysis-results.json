{
  "analysis_summary": "La documentación está bien estructurada pero presenta gaps críticos: falta documentación de seguridad, estrategias de respaldo/recuperación, guías operativas de producción, y diagramas de arquitectura de infraestructura. Hay inconsistencias en profundidad entre secciones y contenido duplicado en 'essentials' y 'api-reference'.",
  "overall_score": 6.8,
  "improvements": [
    {
      "priority": "high",
      "category": "content",
      "title": "Documentación de Seguridad Completa",
      "description": "Falta documentación crítica sobre políticas de seguridad, gestión de secretos, RBAC en Kubernetes, políticas de red, y cumplimiento normativo. Esto es fundamental para operaciones en producción.",
      "files_to_create": [
        "security/overview.mdx",
        "security/secrets-management.mdx",
        "security/network-policies.mdx",
        "security/rbac.mdx",
        "security/compliance.mdx"
      ],
      "files_to_modify": [],
      "files_to_delete": [],
      "proposed_content": "Sección completa de seguridad que documente: gestión de secretos con AWS Secrets Manager/Kubernetes Secrets, políticas RBAC para servicios, network policies entre microservicios, escaneo de vulnerabilidades en contenedores, rotación de credenciales, y cumplimiento GDPR para datos de usuarios.",
      "mermaid_diagram": "",
      "rationale": "La seguridad es fundamental en producción. Sin documentación clara sobre políticas de seguridad, gestión de secretos y RBAC, el sistema queda vulnerable y dificulta auditorías y cumplimiento normativo."
    },
    {
      "priority": "high",
      "category": "diagrams",
      "title": "Diagrama de Arquitectura de Infraestructura AWS Completo",
      "description": "No existe un diagrama completo que muestre toda la infraestructura AWS (VPC, subnets, security groups, EKS, RDS, S3, CloudFront, Route53) y sus interconexiones.",
      "files_to_create": [
        "infrastructure/architecture-diagram.mdx"
      ],
      "files_to_modify": [
        "infrastructure/overview.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Diagrama detallado de la infraestructura AWS mostrando: VPCs públicas/privadas, subnets multi-AZ, security groups, EKS cluster con node groups, RDS PostgreSQL en subnet privada, S3 para assets, CloudFront con Route53, ALB con listeners, y flujo de tráfico desde usuario hasta base de datos.",
      "mermaid_diagram": "graph TB subgraph Internet[Internet] User[Usuario] end subgraph Route53[Route53 DNS] DNS[retrogame.es] end subgraph CloudFront[CloudFront CDN] CF[Distribución CDN<br/>Assets Estáticos] end subgraph VPC[VPC 10.0.0.0/16] subgraph PublicSubnets[Subnets Públicas Multi-AZ] ALB[Application Load Balancer<br/>SSL/TLS Termination] NAT[NAT Gateway] end subgraph PrivateSubnets[Subnets Privadas Multi-AZ] subgraph EKS[EKS Cluster] Kong[Kong API Gateway] Auth[Auth Service] Catalog[Catalog Service] Score[Score Service] Rank[Ranking Service] Users[User Service] end RDS[(RDS PostgreSQL<br/>Multi-AZ)] Redis[(ElastiCache Redis)] end end subgraph S3[S3 Buckets] Games[retrogame-games<br/>Archivos .jsdos] Assets[retrogame-assets<br/>Imágenes] end User --> DNS DNS --> CF CF --> Games CF --> ALB ALB --> Kong Kong --> Auth Kong --> Catalog Kong --> Score Kong --> Rank Kong --> Users Auth --> RDS Catalog --> RDS Score --> RDS Rank --> RDS Users --> RDS Auth --> Redis EKS -.-> NAT NAT -.-> Internet",
      "rationale": "Un diagrama de infraestructura completo es esencial para entender la arquitectura, planificar cambios, diagnosticar problemas y onboarding de nuevos ingenieros. Actualmente esta información está fragmentada."
    },
    {
      "priority": "high",
      "category": "content",
      "title": "Estrategias de Respaldo y Recuperación ante Desastres",
      "description": "No existe documentación sobre backups de RDS, estrategias de recuperación ante desastres (DR), RPO/RTO, ni procedimientos de restauración.",
      "files_to_create": [
        "operations/backup-restore.mdx",
        "operations/disaster-recovery.mdx"
      ],
      "files_to_modify": [
        "infrastructure/overview.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar: configuración de backups automáticos de RDS (retención, ventanas), snapshots manuales, backups de Redis, estrategias de DR multi-región, procedimientos paso a paso de restauración, definición de RPO (Recovery Point Objective) y RTO (Recovery Time Objective), y runbooks para escenarios de fallo común.",
      "mermaid_diagram": "",
      "rationale": "Sin estrategias documentadas de backup y DR, el sistema está en riesgo ante fallos. Es crítico para business continuity y debe estar documentado antes de incidentes reales."
    },
    {
      "priority": "high",
      "category": "diagrams",
      "title": "Diagrama de Flujo de Datos Completo Usuario-a-Base de Datos",
      "description": "Falta un diagrama que muestre el flujo completo de una petición desde el navegador hasta la base de datos, incluyendo todos los componentes intermedios.",
      "files_to_create": [
        "architecture/data-flow.mdx"
      ],
      "files_to_modify": [
        "architecture.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Diagrama que ilustre el camino de una petición típica: Usuario en navegador -> CloudFront (para assets) -> Route53 -> ALB (terminación SSL) -> Kong Gateway (autenticación, rate limiting) -> Microservicio específico -> RDS/Redis, con anotaciones de latencias típicas y puntos de caché.",
      "mermaid_diagram": "sequenceDiagram participant U as Usuario<br/>Navegador participant CF as CloudFront participant R53 as Route53 participant ALB as Application<br/>Load Balancer participant K as Kong<br/>Gateway participant A as Auth<br/>Service participant S as Score<br/>Service participant RDS as PostgreSQL<br/>RDS participant Redis as ElastiCache<br/>Redis U->>CF: GET /assets/game.jsdos CF-->>U: Asset (caché) U->>R53: POST api.retrogame.es/scores R53->>ALB: Resolución DNS ALB->>K: HTTPS (TLS terminado) K->>K: Verificar JWT K->>K: Rate Limiting K->>S: Proxy request S->>Redis: Verificar caché Redis-->>S: Cache miss S->>RDS: INSERT/UPDATE score RDS-->>S: Confirmación S->>Redis: Actualizar caché S-->>K: Response 200 K-->>ALB: Response ALB-->>U: Response",
      "rationale": "Esencial para entender la arquitectura en profundidad, diagnosticar problemas de latencia, y optimizar el rendimiento. Actualmente cada componente está documentado aisladamente."
    },
    {
      "priority": "high",
      "category": "content",
      "title": "Guía de Monitorización y Observabilidad Operativa",
      "description": "infrastructure/monitoring.mdx existe pero está incompleto. Falta documentación sobre dashboards específicos, alertas críticas, runbooks, y procedimientos de on-call.",
      "files_to_create": [
        "operations/monitoring-dashboards.mdx",
        "operations/alerting.mdx",
        "operations/on-call-runbook.mdx"
      ],
      "files_to_modify": [
        "infrastructure/monitoring.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar dashboards de Grafana/Prometheus específicos para cada servicio, métricas clave (latencia p95, tasa de error, throughput), alertas críticas con thresholds, procedimientos de escalado, runbooks para incidentes comunes (servicio caído, base de datos lenta, disco lleno), y rotación de guardia on-call.",
      "mermaid_diagram": "",
      "rationale": "Monitorización efectiva es crítica en producción. Sin documentación clara de alertas y runbooks, los incidentes tardan más en resolverse y aumenta el MTTR (Mean Time To Recovery)."
    },
    {
      "priority": "medium",
      "category": "content",
      "title": "Guía de Escalado Horizontal y Vertical",
      "description": "No existe documentación sobre cuándo y cómo escalar servicios, configuración de HPA (Horizontal Pod Autoscaler), límites de recursos, ni estrategias de capacity planning.",
      "files_to_create": [
        "operations/scaling.mdx",
        "operations/capacity-planning.mdx"
      ],
      "files_to_modify": [
        "infrastructure/eks-cluster.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar: configuración de HPA para cada microservicio con métricas de escalado (CPU, memoria, custom metrics), límites de requests/limits en Kubernetes, estrategias de escalado de RDS (vertical/read replicas), procedimientos para escalar node groups de EKS, y capacity planning basado en proyecciones de usuarios.",
      "mermaid_diagram": "",
      "rationale": "Sin documentación de escalado, el equipo no sabe cómo responder a aumentos de carga. Esto es crítico para mantener SLAs durante picos de tráfico."
    },
    {
      "priority": "medium",
      "category": "diagrams",
      "title": "Diagrama de Estados del Ciclo de Vida del Usuario",
      "description": "Falta un diagrama que muestre los estados del usuario (registrado, verificado, activo, suspendido, eliminado) y las transiciones entre estados.",
      "files_to_create": [
        "services/user-lifecycle.mdx"
      ],
      "files_to_modify": [
        "services/user-service.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Diagrama de estados mostrando el ciclo completo: registro -> verificación email -> usuario activo -> posible suspensión por ToS -> reactivación o eliminación permanente, con eventos que disparan cada transición y acciones del sistema asociadas.",
      "mermaid_diagram": "stateDiagram-v2 [*] --> Registrado Registrado --> EmailPendiente: POST /auth/register EmailPendiente --> Verificado: GET /auth/verify?token=xxx EmailPendiente --> Expirado: 24h sin verificar Expirado --> [*]: Limpieza automática Verificado --> Activo: Primera autenticación Activo --> Suspendido: Violación ToS Suspendido --> Activo: Revisión admin Activo --> Inactivo: 365 días sin login Inactivo --> Activo: Login exitoso Activo --> Eliminado: DELETE /users/:id (soft delete) Eliminado --> [*]: Hard delete tras 30 días",
      "rationale": "Clarifica el comportamiento del sistema respecto a usuarios, ayuda a implementar features como verificación de email y políticas de retención de datos (GDPR compliance)."
    },
    {
      "priority": "medium",
      "category": "content",
      "title": "Documentación de Pipeline CI/CD Detallado",
      "description": "cicd/github-actions.mdx y cicd/gitops-workflow.mdx existen pero están superficiales. Falta detalle sobre stages del pipeline, tests ejecutados, políticas de merge, y rollback automático.",
      "files_to_create": [
        "cicd/pipeline-stages.mdx",
        "cicd/testing-strategy.mdx",
        "cicd/rollback-procedures.mdx"
      ],
      "files_to_modify": [
        "cicd/github-actions.mdx",
        "cicd/gitops-workflow.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar cada stage del pipeline: lint/format, unit tests, integration tests, build de imágenes Docker, escaneo de seguridad (Trivy), push a ECR, actualización de manifiestos K8s, despliegue con ArgoCD, smoke tests post-deployment. Incluir criterios de calidad (cobertura mínima 80%), políticas de merge (2 approvals), y procedimientos de rollback automático ante fallos.",
      "mermaid_diagram": "graph LR A[Git Push] --> B[GitHub Actions Trigger] B --> C[Lint & Format] C --> D[Unit Tests] D --> E[Integration Tests] E --> F[Build Docker Image] F --> G[Security Scan Trivy] G --> H{Vulnerabilidades<br/>críticas?} H -->|Sí| I[Pipeline Falla] H -->|No| J[Push to ECR] J --> K[Update K8s Manifests] K --> L[Git Commit to k8s repo] L --> M[ArgoCD Sync] M --> N[Deploy to EKS] N --> O[Health Checks] O --> P{Healthy?} P -->|No| Q[Auto Rollback] P -->|Sí| R[Smoke Tests] R --> S[Success]",
      "rationale": "Pipeline CI/CD bien documentado acelera onboarding, reduce errores de despliegue, y facilita troubleshooting cuando el pipeline falla. Actualmente la documentación es demasiado general."
    },
    {
      "priority": "medium",
      "category": "diagrams",
      "title": "Diagrama de Arquitectura de Microservicios con Dependencias",
      "description": "Falta un diagrama que muestre las dependencias entre microservicios, qué servicios llaman a qué otros, y las dependencias externas (RDS, Redis, S3).",
      "files_to_create": [
        "architecture/service-dependencies.mdx"
      ],
      "files_to_modify": [
        "architecture.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Diagrama de componentes mostrando todos los microservicios (Auth, Catalog, Score, Ranking, User) con flechas indicando llamadas entre servicios, dependencias compartidas (RDS, Redis), y servicios externos (S3). Incluir tipo de comunicación (síncrona HTTP/REST, asíncrona si aplica).",
      "mermaid_diagram": "graph TB subgraph Frontend FE[Frontend React<br/>js-dos] end subgraph Gateway GW[Kong API Gateway] end subgraph Microservicios AUTH[Auth Service<br/>:3001] CAT[Catalog Service<br/>:3002] SCORE[Score Service<br/>:3003] RANK[Ranking Service<br/>:3004] USER[User Service<br/>:3005] end subgraph DataStores DB[(PostgreSQL RDS)] REDIS[(ElastiCache Redis)] S3[S3 Buckets] end FE -->|HTTPS| GW GW -->|JWT Auth| AUTH GW --> CAT GW --> SCORE GW --> RANK GW --> USER AUTH -.->|Validate JWT| GW SCORE --> AUTH SCORE -.->|Update trigger| RANK RANK --> SCORE USER --> AUTH AUTH --> DB AUTH --> REDIS CAT --> DB CAT --> S3 SCORE --> DB RANK --> DB RANK --> REDIS USER --> DB",
      "rationale": "Entender dependencias entre servicios es fundamental para planificar cambios, identificar puntos únicos de fallo (SPOF), y diseñar estrategias de circuit breaking y resilience."
    },
    {
      "priority": "medium",
      "category": "content",
      "title": "Guía de Contribución y Estándares de Código",
      "description": "Falta documentación sobre cómo contribuir al proyecto: estándares de código, convenciones de commits, process de code review, y branching strategy.",
      "files_to_create": [
        "development/contributing.mdx",
        "development/code-standards.mdx",
        "development/git-workflow.mdx"
      ],
      "files_to_modify": [
        "development.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar: estándares ESLint/Prettier para JavaScript, convenciones de naming (camelCase, PascalCase), estructura de directorios, commit messages (Conventional Commits), branching strategy (GitFlow o trunk-based), proceso de PR (templates, reviewers requeridos, checks automáticos), y definición de done.",
      "mermaid_diagram": "",
      "rationale": "Sin guías de contribución claras, el código se vuelve inconsistente, las PRs tardan más en revisarse, y los nuevos contribuidores no saben cómo empezar."
    },
    {
      "priority": "medium",
      "category": "quality",
      "title": "Consolidar Contenido Duplicado en essentials y api-reference",
      "description": "Existe contenido duplicado y genérico en carpetas 'essentials' (markdown.mdx, code.mdx, etc.) y contenido genérico en 'api-reference/endpoint' que parece ser boilerplate no relacionado con el proyecto.",
      "files_to_create": [],
      "files_to_modify": [],
      "files_to_delete": [
        "essentials/markdown.mdx",
        "essentials/code.mdx",
        "essentials/settings.mdx",
        "essentials/images.mdx",
        "essentials/navigation.mdx",
        "essentials/reusable-snippets.mdx",
        "api-reference/endpoint/get.mdx",
        "api-reference/endpoint/create.mdx",
        "api-reference/endpoint/delete.mdx",
        "api-reference/endpoint/webhook.mdx"
      ],
      "proposed_content": "",
      "mermaid_diagram": "",
      "rationale": "La carpeta 'essentials' contiene documentación genérica sobre Mintlify que no aporta valor al proyecto. Los endpoints en 'api-reference/endpoint' parecen ejemplos genéricos. Eliminarlos reduce ruido y mejora navegación."
    },
    {
      "priority": "low",
      "category": "content",
      "title": "Documentación de Testing End-to-End",
      "description": "No existe documentación sobre estrategia de tests E2E, herramientas utilizadas (Cypress, Playwright), ni suites de tests existentes.",
      "files_to_create": [
        "development/e2e-testing.mdx"
      ],
      "files_to_modify": [
        "cicd/testing-strategy.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar: herramientas de E2E testing utilizadas, cómo ejecutar tests localmente, suite de tests críticos (happy path de usuario: registro, login, jugar juego, guardar score, ver ranking), integración con CI/CD, y estrategias de datos de prueba.",
      "mermaid_diagram": "",
      "rationale": "Tests E2E son la última línea de defensa contra regresiones. Sin documentación, los desarrolladores no saben qué está cubierto ni cómo agregar nuevos tests."
    },
    {
      "priority": "low",
      "category": "content",
      "title": "Documentación de Costes de Infraestructura",
      "description": "No existe documentación sobre el coste estimado de la infraestructura AWS (EKS, RDS, CloudFront, etc.) ni estrategias de optimización de costes.",
      "files_to_create": [
        "operations/cost-management.mdx"
      ],
      "files_to_modify": [
        "infrastructure/overview.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Documentar: desglose de costes mensuales estimados por servicio (EKS ~$73/mes, RDS ~$100/mes, CloudFront por tráfico, etc.), estrategias de optimización (reserved instances, spot instances, right-sizing), y configuración de alertas de presupuesto en AWS.",
      "mermaid_diagram": "",
      "rationale": "Transparencia en costes ayuda a tomar decisiones informadas sobre arquitectura y evita sorpresas en facturación. Útil especialmente para proyectos educativos o startups."
    },
    {
      "priority": "low",
      "category": "diagrams",
      "title": "Diagrama de Arquitectura del Frontend",
      "description": "frontend/overview.mdx y frontend/jsdos-integration.mdx existen pero sin diagrama de arquitectura del cliente (componentes React, gestión de estado, integración js-dos).",
      "files_to_create": [
        "frontend/architecture.mdx"
      ],
      "files_to_modify": [
        "frontend/overview.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Diagrama de arquitectura del frontend mostrando: estructura de componentes React principales (App, GameList, GamePlayer, Leaderboard, UserProfile), gestión de estado (Context API, Redux, o lo que se use), integración con js-dos emulator, y comunicación con backend API vía Kong.",
      "mermaid_diagram": "graph TB subgraph Frontend Application APP[App Component] NAV[Navigation] AUTH[Auth Context] end subgraph Pages HOME[Home/GameList] PLAYER[Game Player] LEAD[Leaderboards] PROFILE[User Profile] end subgraph Components GAME[GameCard] JSDOS[js-dos Emulator] SCORE[ScoreForm] RANK[RankingTable] end subgraph Services API[API Service] STORAGE[LocalStorage] end APP --> NAV APP --> AUTH NAV --> HOME NAV --> PLAYER NAV --> LEAD NAV --> PROFILE HOME --> GAME PLAYER --> JSDOS PLAYER --> SCORE LEAD --> RANK SCORE --> API RANK --> API AUTH --> API API -->|Kong Gateway| BACKEND[Backend Services] JSDOS -->|Load| S3[S3 .jsdos files]",
      "rationale": "Aunque el backend está bien documentado, el frontend carece de diagramas arquitectónicos. Esto ayuda a entender el flujo de datos en el cliente y facilita refactorizaciones."
    },
    {
      "priority": "low",
      "category": "content",
      "title": "Glosario de Términos Técnicos",
      "description": "Para facilitar onboarding, sería útil un glosario con definiciones de términos clave usados en el proyecto (microservicios, Kong, js-dos, GitOps, etc.).",
      "files_to_create": [
        "reference/glossary.mdx"
      ],
      "files_to_modify": [
        "index.mdx"
      ],
      "files_to_delete": [],
      "proposed_content": "Glosario alfabético con definiciones breves: API Gateway, ArgoCD, CloudFront, EKS, GitOps, HPA, Ingress, js-dos (emulador DOS en JavaScript), JWT, Kong, Microservicios, RDS, Service Mesh, etc. Con enlaces a documentación oficial cuando aplique.",
      "mermaid_diagram": "",
      "rationale": "Facilita onboarding de personas menos familiarizadas con la stack tecnológica. Reduce tiempo necesario para entender documentación técnica."
    }
  ],
  "new_sections": [
    {
      "name": "Operaciones (Operations)",
      "description": "Nueva sección dedicada a operaciones en producción: monitorización, alertas, escalado, backups, disaster recovery, y gestión de incidentes.",
      "files": [
        {
          "filename": "operations/overview.mdx",
          "title": "5.1. Visión General de Operaciones",
          "content_outline": "Introducción a operaciones, SLIs/SLOs/SLAs definidos, responsabilidades del equipo ops, enlaces a subsecciones (monitorización, backups, escalado, incident management)."
        },
        {
          "filename": "operations/monitoring-dashboards.mdx",
          "title": "5.2. Dashboards de Monitorización",
          "content_outline": "Dashboards principales de Grafana/Prometheus: dashboard de overview del sistema, dashboards por servicio, métricas clave (latencia p50/p95/p99, tasa de error, throughput), capturas de pantalla de dashboards, queries de Prometheus ejemplo."
        },
        {
          "filename": "operations/alerting.mdx",
          "title": "5.3. Sistema de Alertas",
          "content_outline": "Configuración de alertas en Prometheus/Alertmanager, alertas críticas (servicio caído, latencia alta, tasa de error >5%, disco lleno >85%), severidades (critical, warning, info), canales de notificación (Slack, PagerDuty, email), silenciamiento de alertas."
        },
        {
          "filename": "operations/on-call-runbook.mdx",
          "title": "5.4. Runbook de Guardia On-Call",
          "content_outline": "Procedimientos para ingeniero de guardia: cómo responder a alertas comunes, checklist inicial ante incidente, comandos útiles de diagnóstico (kubectl, aws cli), escalado a equipo senior, postmortem después de incidentes."
        },
        {
          "filename": "operations/backup-restore.mdx",
          "title": "5.5. Respaldos y Restauración",
          "content_outline": "Configuración de backups automáticos de RDS (retención 7 días, ventana 03:00-04:00 UTC), snapshots manuales antes de cambios grandes, backups de Redis (si aplica), procedimientos paso a paso de restauración desde snapshot, tests de restauración trimestrales."
        },
        {
          "filename": "operations/disaster-recovery.mdx",
          "title": "5.6. Recuperación ante Desastres",
          "content_outline": "Estrategia de DR multi-región (si aplica), definiciones de RPO (4 horas) y RTO (2 horas), escenarios de fallo (región AWS completa caída, corrupción de base de datos), procedimientos de failover, tests de DR anuales."
        },
        {
          "filename": "operations/scaling.mdx",
          "title": "5.7. Estrategias de Escalado",
          "content_outline": "Configuración de Horizontal Pod Autoscaler (HPA) para cada microservicio, métricas de escalado (CPU >70%, memoria >80%, custom metrics), límites máximos de réplicas, escalado de RDS (vertical scaling, read replicas), escalado de node groups EKS, capacity planning."
        },
        {
          "filename": "operations/capacity-planning.mdx",
          "title": "5.8. Planificación de Capacidad",
          "content_outline": "Proyecciones de crecimiento de usuarios, análisis de uso de recursos actual, cuándo agregar más nodos al cluster, cuándo escalar RDS, planificación de costes asociados, revisión trimestral de capacidad."
        },
        {
          "filename": "operations/cost-management.mdx",
          "title": "5.9. Gestión de Costes",
          "content_outline": "Desglose de costes mensuales por servicio AWS (EKS, RDS, S3, CloudFront, Route53), estrategias de optimización (reserved instances, spot instances, S3 lifecycle policies), alertas de presupuesto en AWS Budgets, revisión mensual de costes."
        }
      ]
    },
    {
      "name": "Seguridad (Security)",
      "description": "Nueva sección dedicada a seguridad: gestión de secretos, RBAC, políticas de red, cumplimiento normativo, y escaneo de vulnerabilidades.",
      "files": [
        {
          "filename": "security/overview.mdx",
          "title": "6.1. Visión General de Seguridad",
          "content_outline": "Filosofía de seguridad del proyecto, principio de mínimo privilegio, defensa en profundidad, enlaces a subsecciones (secretos, RBAC, network policies, compliance)."
        },
        {
          "filename": "security/secrets-management.mdx",
          "title": "6.2. Gestión de Secretos",
          "content_outline": "Uso de AWS Secrets Manager para credenciales de RDS, Kubernetes Secrets para tokens JWT, rotación automática de secretos cada 90 días, nunca commitear secretos a Git, uso de .env.example sin valores reales, integración con External Secrets Operator (si aplica)."
        },
        {
          "filename": "security/rbac.mdx",
          "title": "6.3. Control de Acceso Basado en Roles (RBAC)",
          "content_outline": "Configuración de RBAC en Kubernetes: ServiceAccounts por microservicio, Roles y ClusterRoles definidos, RoleBindings limitando permisos, ejemplo de cómo cada servicio solo puede leer sus propios ConfigMaps/Secrets, auditoría de permisos."
        },
        {
          "filename": "security/network-policies.mdx",
          "title": "6.4. Políticas de Red",
          "content_outline": "Network Policies en Kubernetes: restricción de tráfico entre pods, solo Kong puede recibir tráfico externo, microservicios solo pueden hablar con RDS/Redis y entre sí según necesidad, bloqueo de egress no autorizado, ejemplos YAML de NetworkPolicy."
        },
        {
          "filename": "security/compliance.mdx",
          "title": "6.5. Cumplimiento Normativo",
          "content_outline": "Cumplimiento GDPR para datos de usuarios en UE: derecho al olvido (soft delete + hard delete tras 30 días), portabilidad de datos (endpoint para exportar datos de usuario), consentimiento explícito, políticas de retención de datos, logs de acceso a datos personales."
        },
        {
          "filename": "security/vulnerability-scanning.mdx",
          "title": "6.6. Escaneo de Vulnerabilidades",
          "content_outline": "Integración de Trivy en pipeline CI/CD para escanear imágenes Docker, políticas de severidad (bloquear critical/high, warning para medium/low), escaneo de dependencias npm con npm audit, actualizaciones regulares de dependencias, proceso de patcheo de vulnerabilidades."
        }
      ]
    },
    {
      "name": "Referencia (Reference)",
      "description": "Nueva sección para material de referencia rápida: glosario, comandos útiles, tablas de puertos/servicios, y FAQs.",
      "files": [
        {
          "filename": "reference/glossary.mdx",
          "title": "7.1. Glosario de Términos",
          "content_outline": "Glosario alfabético con definiciones de términos técnicos usados en el proyecto: API Gateway, ArgoCD, CDN, CloudFront, EKS, GitOps, HPA, Ingress, js-dos, JWT, Kong, Microservicios, RDS, etc. Con enlaces a documentación oficial."
        },
        {
          "filename": "reference/useful-commands.mdx",
          "title": "7.2. Comandos Útiles",
          "content_outline": "Cheatsheet de comandos frecuentes: kubectl (get pods, logs, describe, port-forward), aws cli (eks update-kubeconfig, s3 ls), terraform (plan, apply, destroy), docker (build, push, logs), helm (install, upgrade, rollback)."
        },
        {
          "filename": "reference/ports-services.mdx",
          "title": "7.3. Tabla de Puertos y Servicios",
          "content_outline": ""
        }
      ]
    }
  ]
}