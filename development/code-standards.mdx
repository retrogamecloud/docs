---
title: Gu√≠a de Contribuci√≥n y Est√°ndares de C√≥digo
description: 'Proceso completo para contribuir al proyecto RetroGameCloud: pull requests,
  est√°ndares de c√≥digo, testing y revisiones'
icon: code-pull-request
---

# Gu√≠a de Contribuci√≥n y Est√°ndares de C√≥digo

Esta gu√≠a define el proceso completo para contribuir al proyecto RetroGameCloud, incluyendo est√°ndares de c√≥digo, requisitos de testing y el flujo de trabajo de desarrollo.

## Proceso de Contribuci√≥n

### 1. Preparaci√≥n del Entorno

<Tabs>
  <Tab title="Configuraci√≥n Inicial">
    ```bash
    # Fork del repositorio y clonado
    git clone https://github.com/tu-usuario/retro-game-cloud.git
    cd retro-game-cloud

    # Configuraci√≥n de upstream
    git remote add upstream https://github.com/original/retro-game-cloud.git

    # Instalaci√≥n de dependencias
    npm install

    # Configuraci√≥n de hooks de pre-commit
    npm run prepare
    ```

    <Note>
    La instalaci√≥n deber√≠a completarse sin errores. Si encuentras problemas con dependencias, verifica que est√©s usando Node.js 18+ y npm 9+.
    </Note>

  </Tab>

  <Tab title="Variables de Entorno">
    ```bash
    # Copia el archivo de ejemplo
    cp .env.example .env.local

    # Configuraci√≥n m√≠nima para desarrollo
    NODE_ENV=development
    DATABASE_URL=postgresql://localhost:5432/retrogame_dev
    JWT_SECRET=your-dev-secret
    AWS_REGION=eu-west-1
    ```

    **Salida esperada en `.env.local`:**
    ```env
    NODE_ENV=development
    DATABASE_URL=postgresql://localhost:5432/retrogame_dev
    JWT_SECRET=your-dev-secret
    AWS_REGION=eu-west-1
    NEXTAUTH_URL=http://localhost:3000
    ```

  </Tab>
</Tabs>

### 2. Creaci√≥n de Branches

<Note>
Siempre crea tu branch desde `main` actualizado y usa nomenclatura descriptiva.
</Note>

```bash

# Actualizar main
git checkout main
git pull upstream main

# Crear nueva rama con nomenclatura est√°ndar
git checkout -b feature/nueva-funcionalidad

# Para correcciones de bugs
git checkout -b fix/correccion-bug

# Para actualizaciones de documentaci√≥n
git checkout -b docs/actualizacion-readme

```

* *Verificaci√≥n del branch:**

```bash

# Confirmar que est√°s en el branch correcto
git branch --show-current

# Output: feature/nueva-funcionalidad

```

## Convenciones de Commits

### Formato Est√°ndar

Utilizamos [Conventional Commits](https://www.conventionalcommits.org/es/) con el siguiente formato:

```text
<tipo>(<√°mbito>): <descripci√≥n>

[cuerpo opcional]

[pie opcional]

```

### Tipos de Commit

<Card title="Tipos Principales" icon="git-branch">

- `feat`: Nueva funcionalidad

- `fix`: Correcci√≥n de errores

- `docs`: Cambios en documentaci√≥n

- `style`: Cambios de formato (espacios, comas, etc.)

- `refactor`: Refactorizaci√≥n de c√≥digo

- `test`: A√±adir o modificar tests

- `chore`: Tareas de mantenimiento
</Card>

### Ejemplos de Commits

```bash

# Funcionalidad nueva
git commit -m "feat(auth): implementar autenticaci√≥n con Google OAuth"

# Correcci√≥n de bug
git commit -m "fix(api): corregir validaci√≥n de datos en endpoint /games"

# Documentaci√≥n
git commit -m "docs(readme): actualizar instrucciones de instalaci√≥n"

# Refactorizaci√≥n
git commit -m "refactor(utils): simplificar funci√≥n de validaci√≥n de ROMs"

```

## Est√°ndares de C√≥digo

### JavaScript/TypeScript

<Tabs>
  <Tab title="Naming Conventions">
    ```typescript
    // ‚úÖ Correcto - camelCase para variables y funciones
    const gameTitle = "Super Mario Bros";
    const calculateScore = (points: number) => points * 2;

    // ‚úÖ Correcto - PascalCase para clases y componentes
    class GameManager {
      private playerCount: number;
    }

    // ‚úÖ Correcto - UPPER_SNAKE_CASE para constantes
    const MAX_PLAYERS = 4;
    const API_ENDPOINTS = {
      GAMES: '/api/games',
      USERS: '/api/users'
    } as const;

    // ‚ùå Incorrecto
    const game_title = "Super Mario Bros"; // snake_case
    const CalculateScore = () => {}; // PascalCase para funci√≥n
    ```

    **Resultado esperado en el linter:**
    ```bash
    ‚úì No naming convention violations found
    ```

  </Tab>

  <Tab title="Estructura de Funciones">
    ```typescript
    // ‚úÖ Correcto - Funci√≥n bien estructurada
    /**
     * Calcula el puntaje final del jugador
     * @param baseScore - Puntaje base obtenido
     * @param multiplier - Multiplicador por dificultad
     * @param timeBonus - Bonus por tiempo restante
     * @returns Puntaje final calculado
     */
    export const calculateFinalScore = (
      baseScore: number,
      multiplier: number = 1,
      timeBonus: number = 0
    ): number => {
      // Validar inputs
      if (baseScore < 0 || multiplier < 0) {
        throw new Error('Score values cannot be negative');
      }

      // C√°lculo principal
      const multipliedScore = baseScore * multiplier;
      const finalScore = multipliedScore + timeBonus;

      return Math.round(finalScore);
    };

    // Ejemplo de uso
    const playerScore = calculateFinalScore(1000, 1.5, 200);
    // Expected output: 1700
    ```

  </Tab>

  <Tab title="Manejo de Errores">
    ```typescript
    // ‚úÖ Correcto - Manejo de errores consistente
    export const fetchGameData = async (gameId: string): Promise<Game> => {
      try {
        // Validaci√≥n de input
        if (!gameId || gameId.trim() === '') {
          throw new ValidationError('Game ID is required');
        }

        // Llamada a API
        const response = await fetch(`/api/games/${gameId}`);

        // Manejo de respuestas HTTP
        if (!response.ok) {
          throw new APIError(
            `Failed to fetch game: ${response.status} ${response.statusText}`
          );
        }

        const gameData = await response.json();
        return gameData;

      } catch (error) {
        // Log estructurado
        console.error('Error fetching game data:', {
          gameId,
          error: error instanceof Error ? error.message : 'Unknown error'
        });

        // Re-throw para que el caller pueda manejar
        throw error;
      }
    };

    // Uso con manejo de errores
    try {
      const game = await fetchGameData('mario-bros-3');
      console.log(`Loaded game: ${game.title}`);
    } catch (error) {
      // Handle error appropriately
    }
    ```

  </Tab>
</Tabs>

### React Components

```tsx
// ‚úÖ Componente bien estructurado
interface GameCardProps {
  /** Datos del juego a mostrar */
  game: Game;
  /** Callback cuando se selecciona el juego */
  onSelect?: (gameId: string) => void;
  /** Mostrar informaci√≥n adicional */
  showDetails?: boolean;
}

/**
 * Tarjeta que muestra informaci√≥n de un juego retro
 */
export const GameCard: React.FC<GameCardProps> = ({
  game,
  onSelect,
  showDetails = false
}) => {
  // Hooks al inicio
  const [isLoading, setIsLoading] = useState(false);

  // Event handlers
  const handleCardClick = useCallback(() => {
    if (onSelect) {
      setIsLoading(true);
      onSelect(game.id);
    }
  }, [game.id, onSelect]);

  // Early returns para casos especiales
  if (!game) {
    return <div>No game data available</div>;
  }

  // Render principal
  return (
    <div
      className="game-card"
      onClick={handleCardClick}
      role="button"
      tabIndex={0}
    >
      <img
        src={game.coverUrl}
        alt={`${game.title} cover`}
        loading="lazy"
      />
      <h3>{game.title}</h3>

      {showDetails && (
        <div className="game-details">
          <p>Platform: {game.platform}</p>
          <p>Year: {game.releaseYear}</p>
        </div>
      )}

      {isLoading && <LoadingSpinner />}
    </div>
  );
};

```

## Testing Requirements

### Unit Tests

```typescript
// ‚úÖ Test bien estructurado
import { calculateFinalScore } from '../utils/scoring';

describe('calculateFinalScore', () => {
  // Test case b√°sico
  it('should calculate correct final score with all parameters', () => {
    // Arrange
    const baseScore = 1000;
    const multiplier = 1.5;
    const timeBonus = 200;

    // Act
    const result = calculateFinalScore(baseScore, multiplier, timeBonus);

    // Assert
    expect(result).toBe(1700);
  });

  // Test edge cases
  it('should handle zero values correctly', () => {
    expect(calculateFinalScore(0, 1, 0)).toBe(0);
  });

  it('should throw error for negative base score', () => {
    expect(() => calculateFinalScore(-100, 1, 0))
      .toThrow('Score values cannot be negative');
  });

  // Test con valores por defecto
  it('should use default multiplier when not provided', () => {
    const result = calculateFinalScore(1000);
    expect(result).toBe(1000); // multiplier = 1, timeBonus = 0
  });
});

```

* *Ejecutar tests:**

```bash

# Ejecutar todos los tests
npm test

# Output esperado:

# PASS  src/utils/__tests__/scoring.test.ts

# calculateFinalScore

# ‚úì should calculate correct final score (2 ms)

# ‚úì should handle zero values correctly (1 ms)

# ‚úì should throw error for negative values (1 ms)

```

### Integration Tests

```typescript
// ‚úÖ Test de integraci√≥n para API
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { GamesList } from '../GamesList';
import { mockApiResponse } from '../../__mocks__/api';

// Mock del API
jest.mock('../../services/api', () => ({
  fetchGames: jest.fn(() => Promise.resolve(mockApiResponse.games))
}));

describe('GamesList Integration', () => {
  beforeEach(() => {
    // Reset mocks antes de cada test
    jest.clearAllMocks();
  });

  it('should fetch and display games on mount', async () => {
    // Arrange & Act
    render(<GamesList />);

    // Assert - Loading state
    expect(screen.getByText('Loading games...')).toBeInTheDocument();

    // Assert - Data loaded
    await waitFor(() => {
      expect(screen.getByText('Super Mario Bros')).toBeInTheDocument();
      expect(screen.getByText('The Legend of Zelda')).toBeInTheDocument();
    });

    // Verify API was called
    expect(fetchGames).toHaveBeenCalledTimes(1);
  });

  it('should handle game selection', async () => {
    // Arrange
    const onGameSelect = jest.fn();
    render(<GamesList onGameSelect={onGameSelect} />);

    // Wait for games to load
    await waitFor(() => {
      expect(screen.getByText('Super Mario Bros')).toBeInTheDocument();
    });

    // Act - Click on game
    fireEvent.click(screen.getByText('Super Mario Bros'));

    // Assert
    expect(onGameSelect).toHaveBeenCalledWith('mario-bros-1');
  });
});

```

## Pre-commit Hooks

El proyecto incluye hooks autom√°ticos que se ejecutan antes de cada commit:

```json
// package.json - Configuraci√≥n de husky
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write",
      "git add"
    ],
    "*.{json,md,mdx}": [
      "prettier --write",
      "git add"
    ]
  }
}

```

* *Ejemplo de ejecuci√≥n:**

```bash
git commit -m "feat(games): add game filtering functionality"

# Output esperado:

# ‚úì Preparing...

# ‚úì Running tasks...

# ‚úì Applying modifications...

# ‚úì Cleaning up...

# [feature/game-filtering abc1234] feat(games): add game filtering functionality

```

## Pull Request Process

### 1. Checklist Pre-PR

```markdown

## Checklist antes de crear PR

- [ ] ‚úÖ C√≥digo sigue las convenciones establecidas

- [ ] ‚úÖ Tests a√±adidos/actualizados (coverage > 80%)

- [ ] ‚úÖ Documentaci√≥n actualizada si es necesario

- [ ] ‚úÖ No hay warnings en ESLint/TypeScript

- [ ] ‚úÖ Build pasa correctamente (`npm run build`)

- [ ] ‚úÖ Tests pasan (`npm test`)

```

### 2. Template de PR

```markdown

## Descripci√≥n

Brief descripci√≥n de los cambios realizados.

## Tipo de cambio

- [ ] üêõ Bug fix

- [ ] ‚ú® Nueva funcionalidad

- [ ] üí• Breaking change

- [ ] üìö Documentaci√≥n

## Testing

Describe las pruebas realizadas:

```bash

# Comandos de testing ejecutados
npm test -- --coverage
npm run e2e

# Resultados esperados
All tests passing ‚úÖ
Coverage: 85% ‚úÖ

```

## Screenshots (si aplica)

Antes/Despu√©s de cambios en UI.

## Notas adicionales

Cualquier informaci√≥n adicional para los revisores.

```

### 3. Proceso de Review

<Steps>
  <Step title="Automated Checks">
    GitHub Actions ejecutar√° autom√°ticamente:
    ```yaml
    # .github/workflows/pr-checks.yml (ejemplo)
    name: PR Checks
    on: [pull_request]

    jobs:
      test:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v3
          - uses: actions/setup-node@v3
            with:
              node-version: '18'
          - run: npm ci
          - run: npm run lint
          - run: npm test -- --coverage
          - run: npm run build
    ```

  </Step>

  <Step title="Code Review">
    Los maintainers revisar√°n:
    - Calidad del c√≥digo
    - Cobertura de tests
    - Documentaci√≥n
    - Breaking changes
  </Step>

  <Step title="Merge">
    Una vez aprobado, el PR ser√° merged usando "Squash and merge".
  </Step>
</Steps>

## Debugging Guidelines

### Logging Standards
