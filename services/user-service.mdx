---
title: 3.2. Servicio de Usuarios
description: Gestión completa de perfiles, autenticación y datos de usuarios
icon: user
---

## Descripción

El servicio de usuarios gestiona los perfiles, preferencias y estadísticas de los jugadores en la plataforma. Proporciona funcionalidades completas para la administración de cuentas de usuario, incluyendo autenticación, personalización y seguimiento de actividad.

<CardGroup cols={3}>
  <Card title="Perfiles" icon="id-card">
    Información completa de usuario

    Username, email, avatar, bio y configuración personal
  </Card>

  <Card title="Estadísticas" icon="chart-simple">
    Historial y métricas de juego

    Scores totales, juegos jugados, rankings y progreso
  </Card>

  <Card title="Preferencias" icon="sliders">
    Configuración personalizada

    Tema, idioma, privacidad y notificaciones
  </Card>
</CardGroup>

## Información Técnica

| Aspecto | Detalle |
|---------|---------|
| **Puerto** | 3002 |
| **Base de Datos** | PostgreSQL (usuarios, perfiles, estadísticas) |
| **Dependencias** | Auth Service (3.1), Score Service (3.4) |
| **Cache** | Redis (sesiones, datos frecuentes) |
| **Comunicación** | REST API + WebSocket para actualizaciones en tiempo real |

## Arquitectura del Servicio

### Componentes Principales

<CardGroup cols={2}>
  <Card title="User Manager" icon="users">
    Gestión central de perfiles y datos de usuario
  </Card>
  
  <Card title="Statistics Engine" icon="chart-bar">
    Procesamiento y cálculo de métricas de usuario
  </Card>
  
  <Card title="Preferences Controller" icon="gear">
    Manejo de configuraciones personalizadas
  </Card>
  
  <Card title="Profile Validator" icon="shield-check">
    Validación y moderación de contenido de perfiles
  </Card>
</CardGroup>

### Base de Datos

```sql
-- Tabla principal de usuarios
users (
  id, username, email, created_at, updated_at,
  is_verified, is_active, last_login
)

-- Perfiles extendidos
user_profiles (
  user_id, display_name, bio, avatar_url,
  location, website, privacy_level
)

-- Estadísticas de usuario
user_statistics (
  user_id, total_games, total_score,
  average_score, rank_position, last_game_at
)

-- Preferencias personalizadas
user_preferences (
  user_id, theme, language, timezone,
  notifications_enabled, privacy_settings
)
```

## Características Principales

### Gestión de Perfiles

- **Creación y actualización** de perfiles de usuario
- **Subida y gestión** de avatares personalizados
- **Biografías** y información personal
- **Sistema de verificación** de cuentas
- **Moderación automática** de contenido

### Sistema de Estadísticas

- **Tracking automático** de actividad de juego
- **Cálculo de rankings** globales y por juego
- **Historial detallado** de scores y logros
- **Métricas de tiempo** de juego
- **Análisis de progreso** personalizado

### Configuración y Preferencias

- **Personalización de interfaz** (tema, idioma)
- **Configuración de privacidad** granular
- **Gestión de notificaciones** por categorías
- **Preferencias de juego** avanzadas
- **Sincronización multi-dispositivo**

## Endpoints Principales

### Gestión de Perfiles

<Card title="GET /api/users/:username" icon="eye" href="/api-reference/user-service/get-user-profile">
  Obtener perfil público de usuario
</Card>

<Card title="PUT /api/users/:username" icon="pen" href="/api-reference/user-service/update-user-profile">
  Actualizar perfil de usuario
</Card>

<Card title="POST /api/users/:username/avatar" icon="image" href="/api-reference/user-service/upload-avatar">
  Subir avatar de usuario
</Card>

### Estadísticas y Rankings

<Card title="GET /api/users/:username/stats" icon="chart-line" href="/api-reference/user-service/get-user-stats">
  Obtener estadísticas de usuario
</Card>

<Card title="GET /api/users/:username/history" icon="clock" href="/api-reference/user-service/get-game-history">
  Obtener historial de juegos
</Card>

### Configuración

<Card title="GET /api/users/:username/preferences" icon="sliders" href="/api-reference/user-service/get-preferences">
  Obtener preferencias de usuario
</Card>

<Card title="PUT /api/users/:username/preferences" icon="gear" href="/api-reference/user-service/update-preferences">
  Actualizar preferencias
</Card>

## Integración con Otros Servicios

### Con Auth Service (3.1)
```javascript
// Validación de tokens y permisos
const validateUserAccess = async (token, userId) => {
  const authResult = await authService.validateToken(token);
  return authResult.userId === userId || authResult.role === 'admin';
};
```

### Con Score Service (3.4)
```javascript
// Actualización automática de estadísticas
const updateUserStats = async (scoreEvent) => {
  await userService.updateStatistics(scoreEvent.userId, {
    lastScore: scoreEvent.score,
    totalGames: increment(1),
    totalScore: increment(scoreEvent.score)
  });
};
```

## Funcionalidades Avanzadas

### Sistema de Notificaciones

<CardGroup cols={2}>
  <Card title="Notificaciones Push" icon="bell">
    Alertas en tiempo real para logros y eventos
  </Card>
  
  <Card title="Digest por Email" icon="envelope">
    Resúmenes semanales de actividad
  </Card>
</CardGroup>

### Análisis de Comportamiento

- **Patrones de juego** y horarios de actividad
- **Preferencias** de tipos de juego
- **Análisis de progreso** y mejora
- **Recomendaciones personalizadas**

### Gestión de Privacidad

```yaml
Niveles de Privacidad:
  PUBLIC: Perfil visible para todos
  FRIENDS: Solo amigos pueden ver detalles
  PRIVATE: Perfil completamente privado
  CUSTOM: Configuración granular por campo
```

## Monitoreo y Métricas

### KPIs del Servicio

- **Usuarios activos** diarios/semanales/mensuales
- **Tiempo promedio** de sesión
- **Tasa de retención** de usuarios
- **Interacciones** con perfiles

### Alertas Configuradas

<Warning>
  **Alertas críticas** configuradas para:
  - Caída en registros de usuarios (>20%)
  - Errores de subida de avatares (>5%)
  - Fallas en actualización de estadísticas
  - Problemas de sincronización de preferencias
</Warning>

## Roadmap y Futuras Mejoras

### Próximas Funcionalidades

1. **Sistema de logros** y badges personalizados
2. **Perfiles sociales** con seguimiento entre usuarios  
3. **Personalización avanzada** de interfaz
4. **Integración con redes sociales** externas
5. **Sistema de reputación** comunitaria

### Optimizaciones Técnicas

- Implementación de **GraphQL** para queries flexibles
- **Microservicios** para estadísticas complejas
- **CDN** para gestión eficiente de avatares
- **Machine Learning** para recomendaciones personalizadas