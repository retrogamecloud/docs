---
title: 3.5. Servicio de Rankings
description: Leaderboards y clasificaciones globales con cache Redis y actualizaciones
  en tiempo real
icon: ranking-star
---

## Descripción

El servicio de rankings proporciona tablas de clasificación (leaderboards) para cada juego, mostrando los mejores jugadores y sus puntuaciones. Utiliza cache Redis para alta performance y se actualiza automáticamente cuando se guardan nuevos scores.

<CardGroup cols={3}>
  <Card title="Top Rankings" icon="medal">
    Los mejores jugadores

    Por cada juego o global
  </Card>

  <Card title="Real-time" icon="bolt">
    Actualización inmediata

    Al guardar scores
  </Card>

  <Card title="Cache Redis" icon="database">
    Performance optimizada

    Reducir carga en PostgreSQL
  </Card>
</CardGroup>

## Arquitectura

<CardGroup cols={2}>
  <Card title="Base de Datos" icon="database">
    **PostgreSQL**: Almacenamiento persistente de rankings

    **Redis**: Cache de rankings frecuentemente consultados
  </Card>

  <Card title="Configuración" icon="gear">
    **Puerto**: 3005

    **Dependencias**: Auth Service, Scores Service
  </Card>
</CardGroup>

## Funcionalidades Principales

- **Rankings por juego**: Top 10 mejores scores por cada juego

- **Ranking global**: Mejores jugadores entre todos los juegos

- **Cache inteligente**: Redis para consultas frecuentes

- **Actualización automática**: Sync con nuevos scores

- **Filtros temporales**: Rankings diarios, semanales, mensuales

## Endpoints Principales

El servicio expone los siguientes endpoints REST:

<CardGroup cols={2}>
  <Card title="Rankings por Juego" icon="gamepad-2">
    `GET /api/rankings/games/:gameSlug`

    Obtiene el top 10 de un juego específico
  </Card>

  <Card title="Ranking Global" icon="globe">
    `GET /api/rankings/global`

    Mejores jugadores entre todos los juegos
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="Rankings Temporales" icon="calendar">
    `GET /api/rankings/games/:gameSlug/period`

    Rankings por período de tiempo
  </Card>

  <Card title="Posición de Usuario" icon="user">
    `GET /api/rankings/users/:username/position`

    Posición específica de un jugador
  </Card>
</CardGroup>

### Documentación Detallada

Para especificaciones completas de cada endpoint, parámetros, respuestas y ejemplos de código:

<Card title="API Reference - Rankings Service" icon="book-open" href="/api-reference/rankings">
  Ver documentación completa de endpoints, schemas y ejemplos de implementación
</Card>

## Ejemplo de Integración

```javascript
// Cliente para consultar rankings
const rankingsClient = {
  async getGameRanking(gameSlug) {
    const response = await fetch(`/api/rankings/games/${gameSlug}`);
    return response.json();
  },

  async getGlobalRanking(limit = 10) {
    const response = await fetch(`/api/rankings/global?limit=${limit}`);
    return response.json();
  },

  async getUserPosition(username, gameSlug) {
    const response = await fetch(`/api/rankings/users/${username}/position?game=${gameSlug}`);
    return response.json();
  }
};

// Ejemplo de uso
const doomRanking = await rankingsClient.getGameRanking('doom');
console.log('Top 3 en Doom:', doomRanking.slice(0, 3));

```

## Estrategia de Cache

<CardGroup cols={2}>
  <Card title="Cache Caliente" icon="flame">
    **Top 10 por juego**: TTL 5 minutos

    **Global top 100**: TTL 10 minutos
  </Card>

  <Card title="Invalidación" icon="refresh-cw">
    **Automática**: Al recibir nuevos scores

    **Manual**: Endpoint de administración
  </Card>
</CardGroup>

## Monitoreo y Métricas

- **Latencia promedio**: < 50ms (con cache)

- **Hit ratio Redis**: > 95%

- **Consultas por segundo**: Hasta 1000 RPS

- **Disponibilidad**: 99.9% SLA