---
title: 3.4. Servicio de Puntuaciones
description: Gesti贸n de puntuaciones y logros de jugadores
icon: trophy
---

## Descripci贸n

El servicio de puntuaciones permite a los jugadores guardar y actualizar sus mejores scores en cada juego. Solo guarda el score m谩s alto por usuario y juego, proporcionando un sistema de rankings y logros personalizado.

<CardGroup cols={3}>
  <Card title="JWT Protected" icon="lock">
    Autenticaci贸n requerida

    Solo usuarios autenticados
  </Card>

  <Card title="Best Score Only" icon="star">
    Solo el mejor

    Actualiza si supera el anterior
  </Card>

  <Card title="Real-time" icon="bolt">
    Guardado instant谩neo

    Sin delay
  </Card>
</CardGroup>

## Arquitectura del Servicio

| Caracter铆stica | Detalle |
|---|---|
| **Puerto** | 5003 |
| **Base de Datos** | PostgreSQL (scores) |
| **Dependencias** | Auth Service, Games Service |
| **Cache** | Redis para rankings |

## Caracter铆sticas Principales

###  Gesti贸n de Puntuaciones

- Almacenamiento del mejor score por usuario/juego

- Validaci贸n autom谩tica contra scores existentes

- Historial de mejoras de puntuaciones

###  Sistema de Rankings

- Rankings globales por juego

- Comparativas entre usuarios

- Estad铆sticas de rendimiento

###  Analytics de Jugador

- Progress tracking individual

- M茅tricas de mejora

- Logros desbloqueados

## Endpoints

El servicio expone los siguientes endpoints principales:

<CardGroup cols={2}>
  <Card title="Guardar Puntuaci贸n" icon="save" href="/api-reference/scores/save-score">
    `POST /api/scores`

    Guarda o actualiza la puntuaci贸n de un jugador
  </Card>

  <Card title="Scores de Usuario" icon="user" href="/api-reference/scores/get-user-scores">
    `GET /api/scores/user/:userId`

    Obtiene todas las puntuaciones de un usuario
  </Card>

  <Card title="Ranking Global" icon="trophy" href="/api-reference/scores/get-leaderboard">
    `GET /api/scores/leaderboard/:game`

    Rankings globales por juego
  </Card>

  <Card title="Comparar Scores" icon="chart-bar" href="/api-reference/scores/compare-scores">
    `GET /api/scores/compare/:userId1/:userId2`

    Compara puntuaciones entre usuarios
  </Card>
</CardGroup>

## Ejemplo de Uso B谩sico

### Guardar Nueva Puntuaci贸n

<CodeGroup>

```bash Request
curl -X POST http://api.retrogamecloud.com/api/scores \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "game": "doom",
    "score": 125000
  }'

```

```json Response 200 (Nueva puntuaci贸n)
{
  "message": "Puntuaci贸n guardada",
  "score": 125000,
  "isNewRecord": true,
  "ranking": {
    "position": 15,
    "total": 247
  }
}

```

```json Response 200 (Score menor)
{
  "message": "Puntuaci贸n existente es mayor",
  "currentBest": 180000,
  "submitted": 125000,
  "isNewRecord": false
}

```

</CodeGroup>

### Obtener Scores de Usuario

<CodeGroup>

```bash Request
curl http://api.retrogamecloud.com/api/scores/user/123

```

```json Response 200
[
  {
    "game_name": "DOOM",
    "game_slug": "doom",
    "score": 125000,
    "ranking": 15,
    "created_at": "2025-11-15T14:30:00.000Z",
    "updated_at": "2025-11-18T10:15:00.000Z"
  },
  {
    "game_name": "Quake",
    "game_slug": "quake",
    "score": 89500,
    "ranking": 8,
    "created_at": "2025-11-16T09:20:00.000Z",
    "updated_at": "2025-11-16T09:20:00.000Z"
  }
]

```

</CodeGroup>

## L贸gica de Negocio

### Validaci贸n de Puntuaciones

- Solo se actualizan scores que superen el actual

- Validaci贸n de integridad con datos del juego

- Prevenci贸n de scores artificialmente altos

### Sistema de Rankings

- Actualizaci贸n en tiempo real de posiciones

- Cache de rankings frecuentes

- Paginaci贸n para grandes datasets

## Integraci贸n con Otros Servicios

<Warning>
Este servicio requiere validaci贸n del token JWT (Auth Service) y verificaci贸n del juego existente (Games Service).
</Warning>

<Note>
Para detalles t茅cnicos completos de cada endpoint, consulta la [Referencia de API de Scores](/api-reference/scores).
</Note>

## Casos de Uso Comunes

1. **Guardado Post-Juego**: Automatizar el env铆o de puntuaciones al finalizar partidas
2. **Leaderboards**: Mostrar rankings en interfaces de juego
3. **Progreso Personal**: Tracking de mejoras individuales
4. **Competencias**: Comparativas entre grupos de usuarios

## Consideraciones de Rendimiento

- Cache Redis para rankings frecuentemente consultados

- ndices optimizados para consultas por usuario y juego

- Batch updates para m煤ltiples puntuaciones simult谩neas