---
title: Servicios - Visión General
description: Documentación consolidada de todos los microservicios de RetroGameCloud
  con arquitectura, dependencias y endpoints principales
icon: microchip
---

# 3. Visión General de Microservicios

RetroGameCloud está construido sobre una arquitectura de microservicios que proporciona escalabilidad, mantenibilidad y separación de responsabilidades. Cada servicio tiene un propósito específico y se comunica con otros servicios a través de APIs REST.

## 3.1. Arquitectura General

<div className="mermaid">

```mermaid
graph TB
    Client[Cliente Web/Mobile] --> Gateway[Kong API Gateway]

    Gateway --> Auth[Auth Service<br/>:8001]
    Gateway --> User[User Service<br/>:8002]
    Gateway --> Catalog[Game Catalog<br/>:8003]
    Gateway --> Score[Score Service<br/>:8004]
    Gateway --> Ranking[Ranking Service<br/>:8005]

    %% Comunicación entre servicios
    User -.->|Valida tokens| Auth
    Score -.->|Valida usuarios| Auth
    Score -.->|Info usuarios| User
    Ranking -.->|Obtiene scores| Score
    Catalog -.->|Valida permisos| Auth

    %% Cache distribuido
    Auth --> Redis[(Redis<br/>Cache & Sessions)]
    User --> Redis
    Score --> Redis
    Ranking --> Redis

    %% Bases de datos
    Auth --> AuthDB[(PostgreSQL<br/>auth_db)]
    User --> UserDB[(PostgreSQL<br/>user_db)]
    Catalog --> CatalogDB[(PostgreSQL<br/>catalog_db)]
    Score --> ScoreDB[(PostgreSQL<br/>score_db)]
    Ranking --> RankingDB[(PostgreSQL<br/>ranking_db)]

    %% Servicios externos
    Catalog --> S3[AWS S3<br/>Game Assets]
    Gateway --> CDN[CloudFront CDN]

    %% Estilos
    classDef service fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef database fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef external fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef cache fill:#fff3e0,stroke:#e65100,stroke-width:2px

    class Auth,User,Catalog,Score,Ranking service
    class AuthDB,UserDB,CatalogDB,ScoreDB,RankingDB database
    class S3,CDN external
    class Redis cache

```

</div>

## 3.2. Flujo de Comunicación

<div className="mermaid">

```mermaid
sequenceDiagram
    participant C as Cliente
    participant K as Kong Gateway
    participant A as Auth Service
    participant U as User Service
    participant S as Score Service
    participant R as Redis

    Note over C,R: Ejemplo: Subir nueva puntuación

    C->>K: POST /api/scores (con JWT)
    K->>S: Reenvía request
    S->>R: Busca token en cache
    alt Token en cache
        R-->>S: Token válido
    else Token no en cache
        S->>A: Valida token JWT
        A-->>S: Token válido + user_id
        S->>R: Guarda token en cache
    end

    S->>U: GET /users/{user_id}/profile
    U-->>S: Datos del usuario

    S->>S: Procesa y guarda puntuación
    S-->>K: Respuesta exitosa
    K-->>C: 201 Created

```

</div>

## 3.3. Tabla Comparativa de Servicios

| Servicio | Puerto | Base de Datos | Cache | Dependencias Principales | Estado |
|----------|--------|---------------|--------|-------------------------|--------|
| [Auth Service](/services/auth-service) | 8001 | PostgreSQL (auth_db) | Redis | JWT, bcrypt, OAuth2 | ✅ Activo |
| [User Service](/services/user-service) | 8002 | PostgreSQL (user_db) | Redis | Auth Service | ✅ Activo |
| [Game Catalog](/services/game-catalog) | 8003 | PostgreSQL (catalog_db) | Redis | Auth, S3, CloudFront | ✅ Activo |
| [Score Service](/services/score-service) | 8004 | PostgreSQL (score_db) | Redis | Auth, User Services | ✅ Activo |
| [Ranking Service](/services/ranking-service) | 8005 | PostgreSQL (ranking_db) | Redis | Score Service | ✅ Activo |

## 3.4. Servicios por Categoría

<Tabs>
  <Tab title="Autenticación y Usuarios">
    <CardGroup cols={2}>
      <Card title="Auth Service" icon="shield-check" href="/services/auth-service">
        Gestión de autenticación, autorización y tokens JWT
        - Login/Logout/Register
        - Validación de tokens
        - OAuth2 integration
      </Card>
      <Card title="User Service" icon="users" href="/services/user-service">
        Gestión de perfiles y datos de usuarios
        - Perfiles de usuario
        - Preferencias de juego
        - Historial de actividad
      </Card>
    </CardGroup>
  </Tab>

  <Tab title="Juegos y Contenido">
    <Card title="Game Catalog" icon="gamepad-2" href="/services/game-catalog">
      Catálogo de juegos retro y gestión de assets
      - Biblioteca de ROMs
      - Metadatos de juegos
      - Integración con S3/CDN
    </Card>
  </Tab>

  <Tab title="Puntuaciones y Rankings">
    <CardGroup cols={2}>
      <Card title="Score Service" icon="trophy" href="/services/score-service">
        Gestión de puntuaciones y logros
        - Registro de scores
        - Sistema de logros
        - Validación de puntuaciones
      </Card>
      <Card title="Ranking Service" icon="chart-bar" href="/services/ranking-service">
        Rankings globales y leaderboards
        - Tablas de clasificación
        - Rankings por juego
        - Estadísticas agregadas
      </Card>
    </CardGroup>
  </Tab>
</Tabs>

## 3.5. Patrones de Comunicación

### 3.5.1. Sincronización de Datos

- **Cache distribuido**: Redis para sesiones y datos frecuentes

- **Service-to-Service**: HTTP REST para comunicación directa

- **Rate limiting**: Kong Gateway controla límites por servicio

### 3.5.2. Manejo de Errores

- **Circuit breaker**: Prevención de fallos en cascada

- **Retry policies**: Reintentos automáticos configurables

- **Fallback responses**: Respuestas por defecto en caso de fallo

### 3.5.3. Seguridad

- **JWT tokens**: Autenticación stateless

- **Service mesh**: Comunicación segura entre servicios

- **API rate limiting**: Protección contra abuso

## 3.6. Dependencias Críticas

<Warning>
Los siguientes servicios son críticos para el funcionamiento del sistema:

- **Kong Gateway**: Punto de entrada único

- **Redis**: Cache distribuido y sesiones

- **Auth Service**: Validación de tokens para todos los servicios
</Warning>

<Tip>
Para desarrollo local, todos los servicios pueden ejecutarse con:

```bash
docker-compose up -d

```

</Tip>