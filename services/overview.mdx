---
title: Servicios - Visi√≥n General
description: Documentaci√≥n consolidada de todos los microservicios de RetroGameCloud
  con arquitectura, dependencias, endpoints principales y SLOs de rendimiento
icon: microchip
---

# 3. Visi√≥n General de Microservicios

RetroGameCloud est√° construido sobre una arquitectura de microservicios que proporciona escalabilidad, mantenibilidad y separaci√≥n de responsabilidades. Cada servicio tiene un prop√≥sito espec√≠fico y se comunica con otros servicios a trav√©s de APIs REST.

## 3.1. Arquitectura General

<div className="mermaid">

```mermaid
graph TB
    Client[Cliente Web/Mobile] --> Gateway[Kong API Gateway]

    Gateway --> Auth[Auth Service<br/>:8001]
    Gateway --> User[User Service<br/>:8002]
    Gateway --> Catalog[Game Catalog<br/>:8003]
    Gateway --> Score[Score Service<br/>:8004]
    Gateway --> Ranking[Ranking Service<br/>:8005]

    %% Comunicaci√≥n entre servicios
    User -.->|Valida tokens| Auth
    Score -.->|Valida usuarios| Auth
    Score -.->|Info usuarios| User
    Ranking -.->|Obtiene scores| Score
    Catalog -.->|Valida permisos| Auth

    %% Cache distribuido
    Auth --> Redis[(Redis<br/>Cache & Sessions)]
    User --> Redis
    Score --> Redis
    Ranking --> Redis

    %% Bases de datos
    Auth --> AuthDB[(PostgreSQL<br/>auth_db)]
    User --> UserDB[(PostgreSQL<br/>user_db)]
    Catalog --> CatalogDB[(PostgreSQL<br/>catalog_db)]
    Score --> ScoreDB[(PostgreSQL<br/>score_db)]
    Ranking --> RankingDB[(PostgreSQL<br/>ranking_db)]

    %% Servicios externos
    Catalog --> S3[AWS S3<br/>Game Assets]
    Gateway --> CDN[CloudFront CDN]

    %% Estilos
    classDef service fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef database fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef external fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef cache fill:#fff3e0,stroke:#e65100,stroke-width:2px

    class Auth,User,Catalog,Score,Ranking service
    class AuthDB,UserDB,CatalogDB,ScoreDB,RankingDB database
    class S3,CDN external
    class Redis cache
```

</div>

## 3.2. Service Level Objectives (SLOs)

### 3.2.1. M√©tricas de Rendimiento por Microservicio

| Servicio | Latencia P95 | Disponibilidad | Tasa Error Max | Descripci√≥n |
|----------|--------------|----------------|----------------|-------------|
| **Auth Service** | < 100ms | 99.9% | < 0.1% | Servicio cr√≠tico - autenticaci√≥n y autorizaci√≥n |
| **User Service** | < 150ms | 99.5% | < 0.5% | Gesti√≥n de perfiles y datos de usuario |
| **Game Catalog** | < 200ms | 99.0% | < 1.0% | Cat√°logo de juegos y metadatos |
| **Score Service** | < 50ms | 99.9% | < 0.1% | Registro de puntuaciones en tiempo real |
| **Ranking Service** | < 300ms | 99.0% | < 1.0% | C√°lculos de rankings globales |

### 3.2.2. Justificaci√≥n de SLOs

<div className="grid grid-cols-1 md:grid-cols-2 gap-4">

<div className="border rounded-lg p-4">
**Auth Service - 99.9% / 100ms P95**
- Servicio cr√≠tico del que dependen todos los dem√°s
- Latencia baja esencial para UX fluida
- Tolerancia m√≠nima a errores
</div>

<div className="border rounded-lg p-4">
**Score Service - 99.9% / 50ms P95**
- Funcionalidad core del gaming
- Debe ser ultra-r√°pido para gameplay en tiempo real
- Los errores afectan directamente la experiencia de juego
</div>

<div className="border rounded-lg p-4">
**User Service - 99.5% / 150ms P95**
- Importante pero no cr√≠tico para funcionalidad core
- Tolerancia media a errores
- Latencia aceptable para operaciones de perfil
</div>

<div className="border rounded-lg p-4">
**Ranking Service - 99.0% / 300ms P95**
- Operaciones complejas de agregaci√≥n
- Mayor tolerancia a latencia por naturaleza anal√≠tica
- Funcionalidad complementaria
</div>

</div>

### 3.2.3. Monitoreo y Alertas

```yaml
# Configuraci√≥n de alertas por SLO
alerts:
  latency_p95:
    threshold_multiplier: 1.2  # Alerta al 120% del SLO
    evaluation_window: "5m"
    
  availability:
    threshold_offset: -0.1%    # Alerta 0.1% antes del l√≠mite
    evaluation_window: "10m"
    
  error_rate:
    threshold_multiplier: 0.8  # Alerta al 80% del l√≠mite
    evaluation_window: "5m"
```

## 3.3. Inventario de Servicios

### 3.3.1. Servicios Core

| Servicio | Puerto | Prop√≥sito | Dependencias |
|----------|--------|-----------|--------------|
| **auth-service** | 8001 | Autenticaci√≥n JWT, gesti√≥n de sesiones | Redis, PostgreSQL |
| **user-service** | 8002 | Perfiles de usuario, preferencias | PostgreSQL, auth-service |
| **game-catalog** | 8003 | Cat√°logo de juegos, metadata | PostgreSQL, S3 |
| **score-service** | 8004 | Puntuaciones, logros | PostgreSQL, Redis, auth-service |
| **ranking-service** | 8005 | Rankings globales, estad√≠sticas | PostgreSQL, score-service |

### 3.3.2. Infraestructura

| Componente | Prop√≥sito | Configuraci√≥n |
|------------|-----------|---------------|
| **Kong Gateway** | API Gateway, rate limiting, auth | Puerto 8000/8443 |
| **PostgreSQL** | Base de datos principal | Cluster multi-master |
| **Redis** | Cache distribuido, sesiones | Cluster 3 nodos |
| **AWS S3** | Almacenamiento de assets | Buckets por ambiente |

## 3.4. Patrones de Comunicaci√≥n

### 3.4.1. Comunicaci√≥n S√≠ncrona

```mermaid
sequenceDiagram
    participant C as Cliente
    participant G as Gateway
    participant S as Score Service
    participant A as Auth Service
    participant U as User Service

    C->>G: POST /api/scores
    G->>S: POST /scores
    S->>A: GET /validate-token
    A-->>S: Token v√°lido
    S->>U: GET /users/{id}
    U-->>S: Datos usuario
    S-->>G: Score guardado
    G-->>C: 201 Created
```

### 3.4.2. Manejo de Errores

| Tipo Error | C√≥digo HTTP | Acci√≥n | Retry |
|------------|-------------|---------|-------|
| **Validation** | 400 | Retornar error | No |
| **Auth** | 401/403 | Redirect login | No |
| **Not Found** | 404 | Error espec√≠fico | No |
| **Rate Limit** | 429 | Backoff | S√≠ |
| **Server Error** | 500 | Circuit breaker | S√≠ |

## 3.5. Configuraci√≥n de Desarrollo

### 3.5.1. Docker Compose

```yaml
version: '3.8'
services:
  auth-service:
    build: ./services/auth
    ports: ['8001:8001']
    environment:
      - DATABASE_URL=postgresql://auth_db
      - REDIS_URL=redis://redis:6379
    
  user-service:
    build: ./services/user
    ports: ['8002:8002']
    depends_on: [auth-service]
    
  # ... otros servicios
```

### 3.5.2. Variables de Entorno

| Variable | Servicio | Descripci√≥n | Requerida |
|----------|----------|-------------|-----------|
| `DATABASE_URL` | Todos | Conexi√≥n PostgreSQL | ‚úÖ |
| `REDIS_URL` | Auth, Score | Conexi√≥n Redis | ‚úÖ |
| `JWT_SECRET` | Auth | Clave para tokens | ‚úÖ |
| `AWS_S3_BUCKET` | Catalog | Bucket de assets | ‚úÖ |
| `LOG_LEVEL` | Todos | Nivel de logging | ‚ùå |

## 3.6. Pr√≥ximos Pasos

<div className="flex flex-col gap-4">

**üìã Documentaci√≥n Detallada**
- [Auth Service](/services/auth) - Autenticaci√≥n y autorizaci√≥n
- [User Service](/services/user) - Gesti√≥n de usuarios
- [Game Catalog](/services/catalog) - Cat√°logo de juegos
- [Score Service](/services/scores) - Sistema de puntuaciones
- [Ranking Service](/services/rankings) - Rankings y estad√≠sticas

**üîß Recursos T√©cnicos**
- [Gu√≠a de Despliegue](/deployment/overview)
- [Monitoreo y Alertas](/monitoring/setup)
- [Desarrollo Local](/development/setup)

</div>