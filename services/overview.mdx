---
title: Servicios - Visi√≥n General
description: Documentaci√≥n consolidada de todos los microservicios de RetroGameCloud
  con arquitectura, dependencias, endpoints principales y SLOs de rendimiento
icon: microchip
---

# 3. Visi√≥n General de Microservicios

RetroGameCloud est√° construido sobre una arquitectura de microservicios que proporciona escalabilidad, mantenibilidad y separaci√≥n de responsabilidades. Cada servicio tiene un prop√≥sito espec√≠fico y se comunica con otros servicios a trav√©s de APIs REST.

## 3.1. Arquitectura General

<div className="mermaid">

```mermaid
graph TB
    Client[Cliente Web/Mobile] --> Gateway[Kong API Gateway]

    Gateway --> Auth[Auth Service<br/>:8001]
    Gateway --> User[User Service<br/>:8002]
    Gateway --> Catalog[Game Catalog<br/>:8003]
    Gateway --> Score[Score Service<br/>:8004]
    Gateway --> Ranking[Ranking Service<br/>:8005]

    %% Comunicaci√≥n entre servicios
    User -.->|Valida tokens| Auth
    Score -.->|Valida usuarios| Auth
    Score -.->|Info usuarios| User
    Ranking -.->|Obtiene scores| Score
    Catalog -.->|Valida permisos| Auth

    %% Cache distribuido
    Auth --> Redis[(Redis<br/>Cache & Sessions)]
    User --> Redis
    Score --> Redis
    Ranking --> Redis

    %% Bases de datos
    Auth --> AuthDB[(PostgreSQL<br/>auth_db)]
    User --> UserDB[(PostgreSQL<br/>user_db)]
    Catalog --> CatalogDB[(PostgreSQL<br/>catalog_db)]
    Score --> ScoreDB[(PostgreSQL<br/>score_db)]
    Ranking --> RankingDB[(PostgreSQL<br/>ranking_db)]

    %% Servicios externos
    Catalog --> S3[AWS S3<br/>Game Assets]
    Gateway --> CDN[CloudFront CDN]

    %% Estilos
    classDef service fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef database fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef external fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef cache fill:#fff3e0,stroke:#e65100,stroke-width:2px

    class Auth,User,Catalog,Score,Ranking service
    class AuthDB,UserDB,CatalogDB,ScoreDB,RankingDB database
    class S3,CDN external
    class Redis cache
```

</div>

## 3.2. Inventario de Servicios

| Servicio | Puerto | Responsabilidad | Estado | Versi√≥n |
|----------|--------|-----------------|--------|---------|
| **Auth Service** | 8001 | Autenticaci√≥n y autorizaci√≥n | ‚úÖ Activo | v2.1.0 |
| **User Service** | 8002 | Gesti√≥n de perfiles de usuario | ‚úÖ Activo | v1.8.3 |
| **Game Catalog** | 8003 | Cat√°logo y metadatos de juegos | ‚úÖ Activo | v1.5.2 |
| **Score Service** | 8004 | Puntuaciones y logros | ‚úÖ Activo | v1.4.1 |
| **Ranking Service** | 8005 | Rankings y leaderboards | ‚úÖ Activo | v1.2.7 |

## 3.3. Service Level Objectives (SLOs)

Los siguientes SLOs definen las expectativas de rendimiento y disponibilidad para cada microservicio:

### 3.3.1. Auth Service

<div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
<div className="grid grid-cols-2 gap-4">
<div>
<strong>Latencia</strong>
<ul className="mt-1 text-sm">
<li>P95: ‚â§ 100ms</li>
<li>P99: ‚â§ 250ms</li>
</ul>
</div>
<div>
<strong>Disponibilidad</strong>
<ul className="mt-1 text-sm">
<li>Uptime: ‚â• 99.9%</li>
<li>Tasa de error: ‚â§ 0.1%</li>
</ul>
</div>
</div>
<div className="mt-2">
<strong>Throughput:</strong> 1,000 RPM por instancia
</div>
</div>

### 3.3.2. User Service

<div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
<div className="grid grid-cols-2 gap-4">
<div>
<strong>Latencia</strong>
<ul className="mt-1 text-sm">
<li>P95: ‚â§ 150ms</li>
<li>P99: ‚â§ 400ms</li>
</ul>
</div>
<div>
<strong>Disponibilidad</strong>
<ul className="mt-1 text-sm">
<li>Uptime: ‚â• 99.5%</li>
<li>Tasa de error: ‚â§ 0.5%</li>
</ul>
</div>
</div>
<div className="mt-2">
<strong>Throughput:</strong> 800 RPM por instancia
</div>
</div>

### 3.3.3. Game Catalog Service

<div className="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
<div className="grid grid-cols-2 gap-4">
<div>
<strong>Latencia</strong>
<ul className="mt-1 text-sm">
<li>P95: ‚â§ 200ms</li>
<li>P99: ‚â§ 500ms</li>
</ul>
</div>
<div>
<strong>Disponibilidad</strong>
<ul className="mt-1 text-sm">
<li>Uptime: ‚â• 99.5%</li>
<li>Tasa de error: ‚â§ 0.3%</li>
</ul>
</div>
</div>
<div className="mt-2">
<strong>Throughput:</strong> 1,200 RPM por instancia
</div>
</div>

### 3.3.4. Score Service

<div className="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
<div className="grid grid-cols-2 gap-4">
<div>
<strong>Latencia</strong>
<ul className="mt-1 text-sm">
<li>P95: ‚â§ 120ms</li>
<li>P99: ‚â§ 300ms</li>
</ul>
</div>
<div>
<strong>Disponibilidad</strong>
<ul className="mt-1 text-sm">
<li>Uptime: ‚â• 99.7%</li>
<li>Tasa de error: ‚â§ 0.2%</li>
</ul>
</div>
</div>
<div className="mt-2">
<strong>Throughput:</strong> 2,000 RPM por instancia
</div>
</div>

### 3.3.5. Ranking Service

<div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
<div className="grid grid-cols-2 gap-4">
<div>
<strong>Latencia</strong>
<ul className="mt-1 text-sm">
<li>P95: ‚â§ 180ms</li>
<li>P99: ‚â§ 450ms</li>
</ul>
</div>
<div>
<strong>Disponibilidad</strong>
<ul className="mt-1 text-sm">
<li>Uptime: ‚â• 99.3%</li>
<li>Tasa de error: ‚â§ 0.5%</li>
</ul>
</div>
</div>
<div className="mt-2">
<strong>Throughput:</strong> 600 RPM por instancia
</div>
</div>

## 3.4. Matriz de Dependencias

| Servicio | Dependencias Internas | Dependencias Externas | Criticidad |
|----------|----------------------|----------------------|------------|
| **Auth Service** | - | Redis, PostgreSQL | üî¥ Cr√≠tico |
| **User Service** | Auth Service | Redis, PostgreSQL | üü° Alto |
| **Game Catalog** | Auth Service | PostgreSQL, S3, CDN | üü° Alto |
| **Score Service** | Auth Service, User Service | Redis, PostgreSQL | üü† Medio |
| **Ranking Service** | Score Service | Redis, PostgreSQL | üü¢ Bajo |

## 3.5. Monitoreo de SLOs

### 3.5.1. M√©tricas Clave

- **Golden Signals**: Latencia, Tr√°fico, Errores, Saturaci√≥n
- **Business Metrics**: Usuarios activos, Juegos jugados, Scores registrados
- **Infrastructure Metrics**: CPU, Memoria, Conexiones DB, Cache hit ratio

### 3.5.2. Alertas por Violaci√≥n de SLO

```yaml
# Ejemplo de configuraci√≥n de alertas
alerts:
  - name: "auth-service-latency-high"
    condition: "p95_latency > 100ms"
    severity: "warning"
    action: "scale-up"
  
  - name: "auth-service-availability-low" 
    condition: "uptime < 99.9%"
    severity: "critical"
    action: "page-oncall"
```

## 3.6. Estrategia de Escalado

### Horizontal Pod Autoscaling (HPA)

| Servicio | Min Pods | Max Pods | Trigger CPU | Trigger Memory |
|----------|----------|----------|-------------|----------------|
| Auth Service | 3 | 10 | 70% | 80% |
| User Service | 2 | 8 | 75% | 85% |
| Game Catalog | 2 | 6 | 80% | 85% |
| Score Service | 3 | 12 | 70% | 80% |
| Ranking Service | 1 | 4 | 80% | 85% |

<div className="bg-gray-50 p-4 rounded-lg mt-6">
<h3 className="text-lg font-semibold mb-2">üìä Dashboard de Monitoreo</h3>
<p>Todos los SLOs se monitorean en tiempo real a trav√©s de:</p>
<ul className="list-disc ml-6 mt-2">
<li><strong>Grafana:</strong> Dashboards de m√©tricas por servicio</li>
<li><strong>Prometheus:</strong> Recolecci√≥n y almacenamiento de m√©tricas</li>
<li><strong>AlertManager:</strong> Gesti√≥n de alertas y notificaciones</li>
<li><strong>Jaeger:</strong> Distributed tracing para latencia end-to-end</li>
</ul>
</div>