---
title: "3.3. Game Catalog Service"
description: "API para gestionar el catálogo de juegos retro disponibles"
icon: "gamepad"
---

## Base URL

```
Production:  https://api.retrogamehub.games/games
Development: http://localhost:3002
```

## Endpoints

### GET /games

Lista todos los juegos disponibles con filtros y paginación.

```bash
curl "https://api.retrogamehub.games/games?genre=fps&limit=10"
```

**Query Parameters:**

| Parámetro | Tipo | Descripción |
|-----------|------|-------------|
| genre | string | Filtrar por género (fps, platformer, rpg, puzzle, strategy, fighting) |
| year | number | Filtrar por año de lanzamiento |
| search | string | Búsqueda en nombre y descripción |
| limit | number | Resultados por página (default: 50, max: 100) |
| offset | number | Offset para paginación (default: 0) |

**Response 200:**

```json
{
  "games": [
    {
      "id": 1,
      "name": "DOOM",
      "slug": "doom",
      "description": "El clásico FPS de id Software",
      "year": 1993,
      "publisher": "id Software",
      "genre": "fps",
      "cover_url": "https://cdn.retrogamehub.games/img/doom.jpg",
      "bundle_url": "https://cdn.retrogamehub.games/juegos/doom.jsdos",
      "players": 1,
      "created_at": "2025-11-01T00:00:00.000Z"
    }
  ],
  "total": 10,
  "limit": 50,
  "offset": 0
}
```

---

### GET /games/:slug

Obtiene información detallada de un juego específico.

```bash
curl https://api.retrogamehub.games/games/doom
```

**Response 200:**

```json
{
  "id": 1,
  "name": "DOOM",
  "slug": "doom",
  "description": "El revolucionario shooter en primera persona de 1993...",
  "year": 1993,
  "publisher": "id Software",
  "genre": "fps",
  "cover_url": "https://cdn.retrogamehub.games/img/doom.jpg",
  "bundle_url": "https://cdn.retrogamehub.games/juegos/doom.jsdos",
  "players": 1,
  "file_size": 2400000,
  "controls": {
    "move": "Arrow keys",
    "shoot": "Ctrl",
    "use": "Space",
    "strafe": "Alt + Arrows"
  },
  "metadata": {
    "episodes": 3,
    "levels": 27,
    "weapons": 8
  },
  "stats": {
    "total_players": 1547,
    "average_score": 45230,
    "highest_score": 250000
  },
  "created_at": "2025-11-01T00:00:00.000Z"
}
```

**Errores:**

| Código | Descripción |
|--------|-------------|
| 404 | Juego no encontrado |
| 500 | Error del servidor |

---

### POST /games (Admin)

Agrega un nuevo juego al catálogo.

<Warning>
  Requiere token de administrador en el header Authorization.
</Warning>

**Headers:**
```
Authorization: Bearer <admin-token>
Content-Type: application/json
```

**Request Body:**

```json
{
  "name": "Tetris",
  "slug": "tetris",
  "description": "El clásico puzzle de bloques",
  "year": 1984,
  "publisher": "Alexey Pajitnov",
  "genre": "puzzle",
  "cover_url": "https://cdn.retrogamehub.games/img/tetris.jpg",
  "bundle_url": "https://cdn.retrogamehub.games/juegos/tetris.jsdos",
  "players": 1,
  "controls": {
    "move": "Arrow keys",
    "rotate": "Space",
    "drop": "Down Arrow"
  }
}
```

**Response 201:**

```json
{
  "id": 11,
  "name": "Tetris",
  "slug": "tetris",
  "created_at": "2025-11-20T12:00:00.000Z",
  "message": "Juego agregado exitosamente"
}
```

---

### PATCH /games/:slug (Admin)

Actualiza información de un juego existente.

<Warning>
  Requiere permisos de administrador.
</Warning>

**Request Body:**

```json
{
  "description": "Nueva descripción actualizada",
  "cover_url": "https://cdn.retrogamehub.games/img/doom-hd.jpg"
}
```

**Response 200:**

```json
{
  "message": "Juego actualizado exitosamente",
  "updated_fields": ["description", "cover_url"]
}
```

---

### DELETE /games/:slug (Admin)

Elimina un juego del catálogo.

<Warning>
  Operación irreversible. También elimina todas las puntuaciones asociadas.
</Warning>

**Response 200:**

```json
{
  "message": "Juego eliminado exitosamente",
  "scores_deleted": 1547
}
```

---

## Géneros Disponibles

| Género | Descripción | Ejemplos |
|--------|-------------|----------|
| fps | First-Person Shooter | DOOM, Duke 3D, Wolfenstein |
| platformer | Juegos de plataformas | Prince of Persia, Dangerous Dave |
| rpg | Role-Playing Games | Heroes of M&M II |
| puzzle | Juegos de puzzles | Tetris, Lemmings |
| strategy | Estrategia | Warcraft, Civilization |
| fighting | Juegos de lucha | Mortal Kombat, Street Fighter |

---

## Caching

<Info>
  Los resultados se cachean en CloudFront por **1 hora**. 
  
  Headers:
  - `Cache-Control: public, max-age=3600`
  - `X-Cache: HIT from CloudFront`
</Info>

---

## Rate Limiting

| Operación | Límite |
|-----------|--------|
| GET /games | 100 requests/min |
| GET /games/:slug | 200 requests/min |
| POST /games (Admin) | 10 requests/min |

---

## Ejemplo de Implementación

```javascript
class GameCatalog {
  constructor(apiUrl) {
    this.apiUrl = apiUrl;
    this.cache = new Map();
  }
  
  async getGames(filters = {}) {
    const params = new URLSearchParams(filters);
    const cacheKey = `games-${params.toString()}`;
    
    // Revisar caché local
    if (this.cache.has(cacheKey)) {
      const cached = this.cache.get(cacheKey);
      if (Date.now() - cached.timestamp < 300000) { // 5 min
        return cached.data;
      }
    }
    
    const response = await fetch(`${this.apiUrl}/games?${params}`);
    const data = await response.json();
    
    // Guardar en caché
    this.cache.set(cacheKey, {
      data,
      timestamp: Date.now()
    });
    
    return data;
  }
  
  async getGameBySlug(slug) {
    const cacheKey = `game-${slug}`;
    
    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey).data;
    }
    
    const response = await fetch(`${this.apiUrl}/games/${slug}`);
    
    if (!response.ok) {
      throw new Error(`Game not found: ${slug}`);
    }
    
    const data = await response.json();
    
    this.cache.set(cacheKey, {
      data,
      timestamp: Date.now()
    });
    
    return data;
  }
  
  async searchGames(query) {
    return this.getGames({ search: query, limit: 20 });
  }
  
  async getGamesByGenre(genre) {
    return this.getGames({ genre });
  }
}

// Uso
const catalog = new GameCatalog('https://api.retrogamehub.games');

// Obtener todos los FPS
const fpsGames = await catalog.getGamesByGenre('fps');

// Buscar DOOM
const doom = await catalog.getGameBySlug('doom');

// Buscar por nombre
const results = await catalog.searchGames('street fighter');
```

---

## Base de Datos

### Esquema de tabla `games`

```sql
CREATE TABLE games (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  slug VARCHAR(100) UNIQUE NOT NULL,
  description TEXT,
  year INTEGER NOT NULL,
  publisher VARCHAR(255),
  genre VARCHAR(50) NOT NULL,
  cover_url TEXT NOT NULL,
  bundle_url TEXT NOT NULL,
  players INTEGER DEFAULT 1,
  file_size BIGINT,
  controls JSONB,
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_games_genre ON games(genre);
CREATE INDEX idx_games_year ON games(year);
CREATE INDEX idx_games_slug ON games(slug);
```

---

## Variables de Entorno

```bash
# Game Catalog Service
PORT=3002
DB_HOST=postgres
DB_PORT=5432
DB_NAME=retrogame_catalog
DB_USER=postgres
DB_PASSWORD=secure_password

# CDN Configuration
CDN_BASE_URL=https://cdn.retrogamehub.games
COVER_IMAGES_PATH=/img
GAME_BUNDLES_PATH=/juegos
```

---

## Próximos Pasos

<CardGroup cols={2}>
  <Card title="Jugar Juegos" icon="play" href="/frontend/jsdos-integration">
    Integra js-dos para ejecutar juegos
  </Card>
  <Card title="Scores" icon="trophy" href="/api-reference/score-service">
    Envía puntuaciones de juegos
  </Card>
</CardGroup>
