---
title: "Auth Service API"
description: "Endpoints de autenticaci√≥n, registro y gesti√≥n de tokens JWT"
icon: "shield"
---

<Info>
  Documentaci√≥n generada autom√°ticamente desde el c√≥digo fuente.
  √öltima actualizaci√≥n: 2025-11-19
</Info>

<Warning>
  Esta es una p√°gina de ejemplo. Se sobrescribir√° cuando se ejecute la sincronizaci√≥n autom√°tica.
</Warning>

## Descripci√≥n General

El servicio de autenticaci√≥n maneja:
- üîê Registro de nuevos usuarios
- üé´ Inicio de sesi√≥n y generaci√≥n de tokens JWT
- ‚úÖ Verificaci√≥n de tokens
- üîÑ Renovaci√≥n de tokens (refresh)
- üîí Gesti√≥n de sesiones

## Base URL

```
Production:  https://api.retrogamehub.games/auth
Staging:     https://staging-api.retrogamehub.games/auth
Development: http://localhost:3001
```

## Autenticaci√≥n

Todos los endpoints (excepto `/register` y `/login`) requieren un token JWT v√°lido:

```bash
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

<Warning>
  Los tokens expiran despu√©s de 24 horas. Usa el endpoint de refresh para renovarlos.
</Warning>

---

## Endpoints

### POST /register

Registra un nuevo usuario en la plataforma.

**Request Body:**
```json
{
  "email": "player@example.com",
  "username": "retroPlayer",
  "password": "SecurePass123!"
}
```

**Response 201:**
```json
{
  "success": true,
  "data": {
    "id": 123,
    "email": "player@example.com",
    "username": "retroPlayer",
    "createdAt": "2025-11-19T10:30:00Z"
  },
  "message": "Usuario registrado exitosamente"
}
```

**Errores:**

| C√≥digo | Descripci√≥n |
|--------|-------------|
| 400    | Email o username ya existe |
| 400    | Contrase√±a no cumple requisitos |
| 500    | Error del servidor |

---

### POST /login

Autentica un usuario y genera tokens de acceso.

**Request Body:**
```json
{
  "email": "player@example.com",
  "password": "SecurePass123!"
}
```

**Response 200:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 86400,
    "user": {
      "id": 123,
      "email": "player@example.com",
      "username": "retroPlayer"
    }
  }
}
```

**Errores:**

| C√≥digo | Descripci√≥n |
|--------|-------------|
| 401    | Credenciales inv√°lidas |
| 404    | Usuario no encontrado |
| 500    | Error del servidor |

---

### POST /verify

Verifica si un token JWT es v√°lido.

**Headers:**
```
Authorization: Bearer <token>
```

**Response 200:**
```json
{
  "success": true,
  "data": {
    "valid": true,
    "userId": 123,
    "email": "player@example.com",
    "expiresAt": "2025-11-20T10:30:00Z"
  }
}
```

**Errores:**

| C√≥digo | Descripci√≥n |
|--------|-------------|
| 401    | Token inv√°lido o expirado |
| 500    | Error del servidor |

---

### POST /refresh

Renueva un token de acceso usando un refresh token.

**Request Body:**
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**Response 200:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 86400
  }
}
```

---

### POST /logout

Invalida el token actual y cierra la sesi√≥n.

**Headers:**
```
Authorization: Bearer <token>
```

**Response 200:**
```json
{
  "success": true,
  "message": "Sesi√≥n cerrada exitosamente"
}
```

---

## Modelos de Datos

### User

```typescript
{
  id: number;
  email: string;
  username: string;
  password: string; // Hasheado con bcrypt
  createdAt: Date;
  updatedAt: Date;
  lastLogin?: Date;
}
```

### JWT Payload

```typescript
{
  userId: number;
  email: string;
  iat: number;  // Issued at
  exp: number;  // Expiration
}
```

---

## C√≥digos de Error

| C√≥digo | Nombre | Descripci√≥n |
|--------|--------|-------------|
| 400 | Bad Request | Datos de entrada inv√°lidos |
| 401 | Unauthorized | Token inv√°lido o credenciales incorrectas |
| 403 | Forbidden | No tienes permisos |
| 404 | Not Found | Recurso no encontrado |
| 409 | Conflict | Email/username ya existe |
| 500 | Internal Server Error | Error del servidor |

---

## Rate Limiting

<Warning>
  El servicio de autenticaci√≥n tiene l√≠mites de tasa para prevenir ataques de fuerza bruta.
</Warning>

| Endpoint | L√≠mite |
|----------|--------|
| /register | 5 requests / 15 minutos |
| /login | 10 requests / 15 minutos |
| /verify | 100 requests / minuto |
| /refresh | 20 requests / hora |

---

## Ejemplos con cURL

### Registro

```bash
curl -X POST https://api.retrogamehub.games/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "player@example.com",
    "username": "retroPlayer",
    "password": "SecurePass123!"
  }'
```

### Login

```bash
curl -X POST https://api.retrogamehub.games/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "player@example.com",
    "password": "SecurePass123!"
  }'
```

### Verificar Token

```bash
curl -X POST https://api.retrogamehub.games/auth/verify \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

---

## Seguridad

<Warning>
  **Mejores Pr√°cticas:**
  
  - ‚úÖ Usa HTTPS en producci√≥n
  - ‚úÖ Almacena tokens de forma segura (httpOnly cookies recomendado)
  - ‚úÖ Implementa CORS correctamente
  - ‚úÖ Valida y sanitiza todas las entradas
  - ‚úÖ Usa contrase√±as fuertes (m√≠nimo 8 caracteres, may√∫sculas, n√∫meros)
  - ‚ùå Nunca expongas tokens en URLs o logs
</Warning>

### Requisitos de Contrase√±a

- M√≠nimo 8 caracteres
- Al menos una may√∫scula
- Al menos un n√∫mero
- Al menos un car√°cter especial (opcional pero recomendado)

---

## Variables de Entorno

```bash
# Auth Service Configuration
JWT_SECRET=your-secret-key-here
JWT_EXPIRATION=24h
REFRESH_TOKEN_EXPIRATION=7d
BCRYPT_ROUNDS=10

# Database
DB_HOST=postgres
DB_PORT=5432
DB_NAME=retrogame_auth
DB_USER=postgres
DB_PASSWORD=secure_password
```

<Info>
  Ver [Configuraci√≥n](/configuration) para detalles completos de todas las variables.
</Info>

---

## Pr√≥ximos Pasos

<CardGroup cols={2}>
  <Card title="Game Catalog" icon="gamepad" href="/api-reference/game-catalog-service">
    Explora el cat√°logo de juegos retro
  </Card>
  <Card title="Score Service" icon="trophy" href="/api-reference/score-service">
    Env√≠a y consulta puntuaciones
  </Card>
  <Card title="Rankings" icon="chart-bar" href="/api-reference/ranking-service">
    Consulta rankings globales
  </Card>
  <Card title="User Service" icon="user" href="/api-reference/user-service">
    Gestiona perfiles de usuario
  </Card>
</CardGroup>
