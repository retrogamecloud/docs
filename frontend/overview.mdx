---
title: Frontend Overview
sidebarTitle: 3.1. Frontend
description: Interfaz de usuario retro para jugar juegos clásicos de DOS con HTML/CSS/JS vanilla
icon: display
---

## Arquitectura del Frontend

El frontend de Retro Game Hub es una aplicación web estática con diseño retro años 80, construida con HTML/CSS/JS vanilla, enfocada en proporcionar una experiencia nostálgica de terminal para jugar juegos clásicos de DOS.

### Características Principales

<CardGroup cols={2}>
  <Card title="Diseño Retro" icon="terminal">
    Estética de terminal CRT años 80 con CSS personalizado
  </Card>
  <Card title="js-dos Integration" icon="gamepad">
    Emulador DOSBox WebAssembly en el navegador
  </Card>
  <Card title="Autenticación JWT" icon="key">
    Sistema seguro de login/registro con tokens
  </Card>
  <Card title="Rankings en Vivo" icon="trophy">
    Leaderboards actualizados dinámicamente
  </Card>
</CardGroup>

## Stack Tecnológico

```yaml
Frontend:
  - HTML5/CSS3/JavaScript vanilla (sin frameworks)
  - js-dos 7.x (DOSBox WebAssembly)
  - Font: VT323 (Google Fonts) para estética retro
  - Score tracker modular (score-tracker.js)

Servidor Frontend:
  - Node.js + Express
  - Puerto: 8080
  - Sirve archivos estáticos
  - Proxy requests a Kong Gateway

CDN Local:
  - Nginx para juegos (.jsdos)
  - Puerto: 80
  - Sirve ROMs e imágenes
  - Cache de assets estáticos
```

## Arquitectura de Componentes

```mermaid
graph TB
    subgraph "Frontend Architecture"
        A[index.html - Landing Page] --> B[AuthManager.js]
        A --> C[retro.css]

        D[games.html - Game Selection] --> E[GameGrid Display]
        D --> F[Game Metadata]

        G[health.html - Game Player] --> H[js-dos Integration]
        G --> I[score-tracker.js]

        B --> J[API Client - Fetch]
        I --> J
        E --> J

        J --> K[Kong Gateway :8000]
        K --> L[Backend API :3000]

        H --> N[DOSBox WebAssembly]
        H --> O[Nginx CDN :80]
    end

    subgraph "State Management"
        P[LocalStorage - JWT Tokens]
        Q[SessionStorage - Game State]
        R[Memory - UI State]

        B --> P
        I --> Q
        E --> R
    end

    subgraph "Routing"
        S[Page-based Navigation]
        T[index.html → games.html]
        U[games.html → health.html]

        S --> T
        S --> U
    end
```

## Flujo de Datos y API Calls

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant A as Auth API
    participant G as Games API
    participant S as Scores API
    participant C as CDN

    Note over U,C: Authentication Flow
    U->>F: Login/Register
    F->>A: POST /auth/login
    A->>F: JWT Token
    F->>F: Store in localStorage

    Note over U,C: Game Selection Flow
    F->>G: GET /games (with JWT)
    G->>F: Games list + metadata
    F->>F: Render game grid

    Note over U,C: Game Loading Flow
    U->>F: Select game
    F->>C: Request .jsdos file
    C->>F: Game ROM data
    F->>F: Initialize js-dos
    F->>F: Mount DOSBox

    Note over U,C: Score Tracking Flow
    F->>F: Monitor game events
    F->>S: POST /scores/update
    S->>F: Updated leaderboard
    F->>F: Update UI rankings

```

## Gestión de Estado

```mermaid
graph LR
    subgraph "Authentication State"
        A1[User Token] --> A2[LocalStorage]
        A3[Login Status] --> A4[Memory]
        A5[User Profile] --> A2
    end

    subgraph "Game State"
        G1[Current Game] --> G2[SessionStorage]
        G3[Game Progress] --> G2
        G4[Save States] --> G5[IndexedDB]
    end

    subgraph "UI State"
        U1[Active Page] --> U2[Hash Router]
        U3[Modal States] --> U4[Memory]
        U5[Loading States] --> U4
    end

    subgraph "Score State"
        S1[Current Score] --> S2[Memory]
        S2 --> S3[Real-time Updates]
        S4[Leaderboards] --> S5[SessionStorage]
    end

```

## Integración js-dos

```mermaid
graph TB
    subgraph "js-dos Integration Layer"
        A[Game Loader] --> B[DOSBox WASM]
        A --> C[File System Mount]
        A --> D[Input Handler]

        B --> E[DOS Environment]
        C --> F[Virtual Drive C:]
        D --> G[Keyboard/Mouse Events]

        E --> H[Game Execution]
        F --> H
        G --> H

        H --> I[Screen Buffer]
        H --> J[Audio Buffer]
        H --> K[Game Events]

        I --> L[Canvas Renderer]
        J --> M[Audio Context]
        K --> N[Score Tracker]
    end

    subgraph "Performance Optimization"
        O[WebWorker Thread]
        P[Shared Array Buffer]
        Q[Memory Pool]

        B --> O
        E --> P
        F --> Q
    end

```

## Estructura de Archivos

```

frontend/
├── server.js              # Express server
├── package.json          # Dependencias
├── Dockerfile           # Contenedor para K8s
├── index.html          # Landing page + Auth
├── games.html         # Game selection grid
├── health.html       # Health check page
├── retro.css        # Estilos retro globales
├── js/
│   ├── auth-manager.js    # Gestión de autenticación
│   ├── game-loader.js     # Carga y inicialización de juegos
│   ├── api-client.js      # Cliente para APIs
│   ├── router.js          # Enrutamiento hash-based
│   ├── ui-components.js   # Componentes UI reutilizables
│   └── state-manager.js   # Gestión de estado global
├── score-tracker.js # Gestión de puntuaciones
└── jsdos/          # js-dos library
    ├── js-dos.js
    ├── wdosbox.js
    └── emulators/

```

## Páginas Principales

### Landing Page (index.html)

<Accordion title="Ver detalles de index.html">

La página principal incluye:

* *Características:**

- Sistema de login/registro con JWT

- Validación de formularios en tiempo real

- Diseño responsive con grid animado

- Efecto CRT con scanlines

- Transiciones suaves entre estados

* *Componentes:**

- `AuthForm`: Formularios de login/registro

- `WelcomeScreen`: Pantalla de bienvenida

- `LoadingSpinner`: Indicadores de carga retro

</Accordion>

### Game Selection (games.html)

<Accordion title="Ver detalles de games.html">

Grid de selección de juegos con:

* *Características:**

- Filtros por categoría y año

- Búsqueda en tiempo real

- Thumbnails animados

- Información detallada de cada juego

- Leaderboards por juego

* *Componentes:**

- `GameGrid`: Cuadrícula de juegos

- `GameCard`: Tarjeta individual de juego

- `FilterPanel`: Panel de filtros

- `SearchBar`: Barra de búsqueda

</Accordion>

### Game Player

<Accordion title="Ver detalles del reproductor">

Interfaz de juego con:

* *Características:**

- Emulador js-dos embebido

- Controles de pantalla completa

- Sistema de guardado/carga

- Tracker de puntuaciones en vivo

- Chat opcional entre jugadores

* *Componentes:**

- `DosEmulator`: Wrapper del emulador

- `GameControls`: Controles de juego

- `ScoreDisplay`: Visualización de puntuación

- `SaveStateManager`: Gestión de partidas guardadas

</Accordion>

## Routing y Navegación

El sistema utiliza routing basado en hash para navegación SPA:

```javascript
// Rutas principales
#/                    // Landing page
#/games              // Selección de juegos
#/play/:gameId       // Reproductor de juego
#/leaderboards       // Rankings globales
#/profile           // Perfil de usuario

```

## Optimizaciones de Rendimiento

- **Lazy Loading**: Carga bajo demanda de componentes js-dos

- **Service Workers**: Cache de assets y juegos

- **WebAssembly**: DOSBox compilado para máximo rendimiento

- **Memory Management**: Gestión cuidadosa de memoria en emulación

- **Asset Compression**: Compresión de ROMs y recursos estáticos