---
title: 6.2. TopologÃ­a de Infraestructura AWS
description: TopologÃ­a completa de la infraestructura AWS para RetroGameCloud incluyendo
  VPC, subnets, security groups y servicios distribuidos en mÃºltiples AZ con flujos
  de trÃ¡fico detallados
icon: diagram-project
---

# TopologÃ­a de Infraestructura AWS

Esta pÃ¡gina documenta la arquitectura completa de AWS para la plataforma RetroGameCloud, mostrando todos los componentes de infraestructura distribuidos en mÃºltiples zonas de disponibilidad, sus interconexiones y flujos de trÃ¡fico.

## Diagrama de TopologÃ­a Completa

```mermaid
graph TB
    subgraph Internet[ğŸŒ Internet]
        U[ğŸ‘¥ Usuarios Globales]
        API_EXT[ğŸ”Œ APIs Externas]
        DEV[ğŸ‘¨â€ğŸ’» Desarrolladores]
    end

    subgraph Route53[ğŸ“ Route 53 DNS]
        DNS_MAIN[retrogame.cloud]
        DNS_API[api.retrogame.cloud]
        DNS_CDN[cdn.retrogame.cloud]
        DNS_ADMIN[admin.retrogame.cloud]
    end

    subgraph CloudFront[âš¡ CloudFront Global CDN]
        CF_WEB[Web Distribution<br/>Static Assets]
        CF_API[API Distribution<br/>Dynamic Content]
        CF_ASSETS[Assets Distribution<br/>Game Files]
    end

    subgraph WAF[ğŸ›¡ï¸ AWS WAF]
        WAF_RULES[DDoS Protection<br/>Rate Limiting<br/>SQL Injection]
    end

    subgraph Region[ğŸŒ us-east-1 Virginia]
        subgraph VPC[ğŸ¢ VPC RetroGameCloud<br/>CIDR: 10.0.0.0/16]

            subgraph IGW_ZONE[Internet Gateway Zone]
                IGW[ğŸŒ Internet Gateway]
            end

            subgraph AZ1[ğŸ“ Availability Zone us-east-1a]
                subgraph PUB1[ğŸŒ Public Subnet<br/>10.0.1.0/24]
                    ALB1[âš–ï¸ Application Load Balancer<br/>Primary]
                    NAT1[ğŸ”„ NAT Gateway 1<br/>Elastic IP]
                    BASTION1[ğŸ” Bastion Host 1]
                end

                subgraph PRIV1[ğŸ”’ Private Subnet<br/>10.0.11.0/24]
                    subgraph EKS1[â˜¸ï¸ EKS Node Group 1<br/>t3.large instances]
                        subgraph PODS1[Pod Network]
                            API_POD1[ğŸš€ API Gateway Pods<br/>3 replicas]
                            AUTH_POD1[ğŸ” Auth Service Pods<br/>2 replicas]
                            GAME_POD1[ğŸ® Game Service Pods<br/>3 replicas]
                            USER_POD1[ğŸ‘¤ User Service Pods<br/>2 replicas]
                        end
                    end
                end

                subgraph DB1[ğŸ—„ï¸ Database Subnet<br/>10.0.21.0/24]
                    RDS_PRIMARY[ğŸ“Š RDS Primary<br/>PostgreSQL 14<br/>db.r5.large]
                    REDIS_PRIMARY[âš¡ ElastiCache Primary<br/>cache.r6g.large]
                end
            end

            subgraph AZ2[ğŸ“ Availability Zone us-east-1b]
                subgraph PUB2[ğŸŒ Public Subnet<br/>10.0.2.0/24]
                    ALB2[âš–ï¸ Application Load Balancer<br/>Secondary]
                    NAT2[ğŸ”„ NAT Gateway 2<br/>Elastic IP]
                    BASTION2[ğŸ” Bastion Host 2]
                end

                subgraph PRIV2[ğŸ”’ Private Subnet<br/>10.0.12.0/24]
                    subgraph EKS2[â˜¸ï¸ EKS Node Group 2<br/>t3.large instances]
                        subgraph PODS2[Pod Network]
                            API_POD2[ğŸš€ API Gateway Pods<br/>3 replicas]
                            AUTH_POD2[ğŸ” Auth Service Pods<br/>2 replicas]
                            GAME_POD2[ğŸ® Game Service Pods<br/>3 replicas]
                            USER_POD2[ğŸ‘¤ User Service Pods<br/>2 replicas]
                        end
                    end
                end

                subgraph DB2[ğŸ—„ï¸ Database Subnet<br/>10.0.22.0/24]
                    RDS_STANDBY[ğŸ“Š RDS Standby<br/>PostgreSQL 14<br/>db.r5.large]
                    REDIS_REPLICA[âš¡ ElastiCache Replica<br/>cache.r6g.large]
                end
            end

            subgraph AZ3[ğŸ“ Availability Zone us-east-1c]
                subgraph PUB3[ğŸŒ Public Subnet<br/>10.0.3.0/24]
                    NAT3[ğŸ”„ NAT Gateway 3<br/>Elastic IP]
                end

                subgraph PRIV3[ğŸ”’ Private Subnet<br/>10.0.13.0/24]
                    subgraph EKS3[â˜¸ï¸ EKS Node Group 3<br/>t3.large instances]
                        subgraph PODS3[Pod Network]
                            API_POD3[ğŸš€ API Gateway Pods<br/>2 replicas]
                            WORKER_POD3[âš™ï¸ Worker Pods<br/>Background Jobs]
                            MONITOR_POD3[ğŸ“Š Monitoring Pods<br/>Prometheus/Grafana]
                        end
                    end
                end

                subgraph DB3[ğŸ—„ï¸ Database Subnet<br/>10.0.23.0/24]
                    REDIS_BACKUP[âš¡ ElastiCache Backup<br/>cache.r6g.large]
                end
            end

            subgraph STORAGE[ğŸ’¾ Storage Layer]
                S3_ASSETS[ğŸª£ S3 Games Assets<br/>Versioned/Encrypted]
                S3_BACKUPS[ğŸª£ S3 Database Backups<br/>Cross-Region Replication]
                S3_LOGS[ğŸª£ S3 Application Logs<br/>Lifecycle Policies]
                EFS[ğŸ“ EFS Shared Storage<br/>Cross-AZ Access]
            end

            subgraph CONTROL_PLANE[ğŸ›ï¸ EKS Control Plane]
                EKS_API[â˜¸ï¸ Kubernetes API Server]
                EKS_ETCD[ğŸ’¾ etcd Cluster]
                EKS_SCHEDULER[âš™ï¸ Scheduler]
            end

        end
    end

    subgraph EXTERNAL[ğŸŒ External Services]
        GITHUB[ğŸ“¦ GitHub Container Registry]
        DATADOG[ğŸ“Š Datadog APM]
        SENDGRID[ğŸ“§ SendGrid Email]
    end

    %% Conexiones principales
    U --> Route53
    Route53 --> CloudFront
    CloudFront --> WAF
    WAF --> IGW
    
    IGW --> ALB1
    IGW --> ALB2
    
    ALB1 --> API_POD1
    ALB1 --> API_POD2
    ALB2 --> API_POD3
    
    API_POD1 --> AUTH_POD1
    API_POD1 --> GAME_POD1
    API_POD1 --> USER_POD1
    
    API_POD2 --> AUTH_POD2
    API_POD2 --> GAME_POD2
    API_POD2 --> USER_POD2
    
    GAME_POD1 --> RDS_PRIMARY
    USER_POD1 --> RDS_PRIMARY
    AUTH_POD1 --> REDIS_PRIMARY
    
    RDS_PRIMARY --> RDS_STANDBY
    REDIS_PRIMARY --> REDIS_REPLICA
    
    NAT1 --> IGW
    NAT2 --> IGW
    NAT3 --> IGW
    
    PODS1 --> NAT1
    PODS2 --> NAT2
    PODS3 --> NAT3
    
    PODS1 --> S3_ASSETS
    PODS2 --> S3_ASSETS
    PODS3 --> S3_ASSETS
    
    DEV --> BASTION1
    DEV --> BASTION2
    
    BASTION1 --> EKS1
    BASTION2 --> EKS2
    
    PODS1 --> GITHUB
    PODS2 --> GITHUB
    PODS3 --> GITHUB
    
    MONITOR_POD3 --> DATADOG
    USER_POD1 --> SENDGRID
    USER_POD2 --> SENDGRID

    style Internet fill:#e1f5fe
    style Route53 fill:#f3e5f5
    style CloudFront fill:#fff3e0
    style WAF fill:#ffebee
    style VPC fill:#e8f5e8
    style AZ1 fill:#fff8e1
    style AZ2 fill:#f1f8e9
    style AZ3 fill:#fce4ec
```

## Componentes de Red y Seguridad

### VPC y Subnetting

```mermaid
graph TB
    subgraph VPC[VPC RetroGameCloud - 10.0.0.0/16]
        subgraph PUBLIC[Public Subnets]
            PUB1[us-east-1a<br/>10.0.1.0/24]
            PUB2[us-east-1b<br/>10.0.2.0/24]
            PUB3[us-east-1c<br/>10.0.3.0/24]
        end
        
        subgraph PRIVATE[Private Subnets]
            PRIV1[us-east-1a<br/>10.0.11.0/24]
            PRIV2[us-east-1b<br/>10.0.12.0/24]
            PRIV3[us-east-1c<br/>10.0.13.0/24]
        end
        
        subgraph DATABASE[Database Subnets]
            DB1[us-east-1a<br/>10.0.21.0/24]
            DB2[us-east-1b<br/>10.0.22.0/24]
            DB3[us-east-1c<br/>10.0.23.0/24]
        end
        
        subgraph ROUTING[Route Tables]
            RT_PUB[Public Route Table<br/>0.0.0.0/0 â†’ IGW]
            RT_PRIV1[Private RT AZ-1a<br/>0.0.0.0/0 â†’ NAT-1]
            RT_PRIV2[Private RT AZ-1b<br/>0.0.0.0/0 â†’ NAT-2]
            RT_PRIV3[Private RT AZ-1c<br/>0.0.0.0/0 â†’ NAT-3]
            RT_DB[Database Route Table<br/>Local VPC Only]
        end
    end
```

### Security Groups

```mermaid
graph LR
    subgraph SG_ALB[ALB Security Group]
        ALB_IN[Inbound:<br/>443/tcp from 0.0.0.0/0<br/>80/tcp from 0.0.0.0/0]
        ALB_OUT[Outbound:<br/>8080/tcp to EKS-SG]
    end
    
    subgraph SG_EKS[EKS Security Group]
        EKS_IN[Inbound:<br/>8080/tcp from ALB-SG<br/>443/tcp from Bastion-SG<br/>All traffic from self]
        EKS_OUT[Outbound:<br/>5432/tcp to RDS-SG<br/>6379/tcp to Redis-SG<br/>443/tcp to 0.0.0.0/0]
    end
    
    subgraph SG_RDS[RDS Security Group]
        RDS_IN[Inbound:<br/>5432/tcp from EKS-SG]
        RDS_OUT[Outbound:<br/>None]
    end
    
    subgraph SG_REDIS[Redis Security Group]
        REDIS_IN[Inbound:<br/>6379/tcp from EKS-SG]
        REDIS_OUT[Outbound:<br/>None]
    end
    
    subgraph SG_BASTION[Bastion Security Group]
        BASTION_IN[Inbound:<br/>22/tcp from Admin IPs]
        BASTION_OUT[Outbound:<br/>22/tcp to EKS-SG<br/>443/tcp to 0.0.0.0/0]
    end
```

## Servicios de Infraestructura

### EKS Cluster Configuration

```mermaid
graph TB
    subgraph EKS_CLUSTER[EKS Cluster: retrogame-prod]
        subgraph CONTROL[Control Plane - Managed by AWS]
            API_SERVER[Kubernetes API Server<br/>Multi-AZ Deployment]
            ETCD[etcd Database<br/>Encrypted at Rest]
            SCHEDULER[Kubernetes Scheduler]
            CONTROLLER[Controller Manager]
        end
        
        subgraph NODE_GROUPS[Node Groups]
            subgraph NG1[Primary Node Group]
                NG1_CONFIG[Instance Type: t3.large<br/>Min: 2, Max: 10, Desired: 6<br/>AZ: us-east-1a, us-east-1b]
            end
            
            subgraph NG2[Monitoring Node Group]
                NG2_CONFIG[Instance Type: t3.medium<br/>Min: 1, Max: 3, Desired: 2<br/>AZ: us-east-1c<br/>Taint: monitoring=true]
            end
        end
        
        subgraph ADDONS[EKS Add-ons]
            VPC_CNI[VPC CNI<br/>Pod Networking]
            CORE_DNS[CoreDNS<br/>Service Discovery]
            KUBE_PROXY[kube-proxy<br/>Network Proxy]
            AWS_LB[AWS Load Balancer Controller]
            CSI_DRIVER[EBS CSI Driver<br/>Persistent Volumes]
        end
    end
```

### Database Architecture

```mermaid
graph TB
    subgraph RDS_CLUSTER[RDS PostgreSQL Multi-AZ]
        subgraph PRIMARY[Primary Instance - us-east-1a]
            RDS_P[PostgreSQL 14.7<br/>db.r5.large<br/>2 vCPU, 16 GB RAM<br/>100 GB gp3 Storage]
        end
        
        subgraph STANDBY[Standby Instance - us-east-1b]
            RDS_S[PostgreSQL 14.7<br/>db.r5.large<br/>2 vCPU, 16 GB RAM<br/>100 GB gp3 Storage<br/>Synchronous Replication]
        end
        
        subgraph BACKUP[Backup Strategy]
            AUTO_BACKUP[Automated Backups<br/>7 days retention<br/>Daily at 03:00 UTC]
            SNAPSHOT[Manual Snapshots<br/>Before deployments]
        end
    end
    
    subgraph REDIS_CLUSTER[ElastiCache Redis Cluster]
        subgraph REDIS_PRIMARY[Primary - us-east-1a]
            REDIS
```