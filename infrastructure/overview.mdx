---
title: 4.1. Visi√≥n General de Infraestructura
description: Infraestructura cloud AWS gestionada con Terraform para alta disponibilidad
  y escalabilidad
icon: file-lines
---

## Infraestructura como C√≥digo

La infraestructura de Retro Game Hub est√° completamente gestionada con **Terraform**, asegurando despliegues reproducibles y versionados en AWS.

## Arquitectura de la Infraestructura

<div className="mermaid">

```mermaid
graph TB
    subgraph "Internet"
        Users[üë• Usuarios]
        GitHub[GitHub OAuth]
    end

    subgraph "AWS Cloud"
        subgraph "Route53 + CloudFront"
            DNS[Route53<br/>retrogamehub.games]
            CDN[CloudFront CDN<br/>Assets & Contenido]
        end

        subgraph "VPC (10.0.0.0/16)"
            subgraph "Public Subnets"
                ALB[Application Load Balancer]
                NAT1[NAT Gateway AZ-1]
                NAT2[NAT Gateway AZ-2]
                IGW[Internet Gateway]
            end

            subgraph "Private Subnets - AZ1"
                EKS1[EKS Worker Nodes]
                RDS_PRIMARY[(RDS PostgreSQL<br/>Primary)]
            end

            subgraph "Private Subnets - AZ2"
                EKS2[EKS Worker Nodes]
                RDS_STANDBY[(RDS PostgreSQL<br/>Standby)]
                REDIS[(ElastiCache Redis)]
            end

            subgraph "EKS Control Plane"
                CONTROL[EKS Managed Control Plane]
                NGINX[Ingress NGINX]
                OAUTH[OAuth2-Proxy]
            end
        end

        subgraph "Storage & Logs"
            S3[S3 Buckets<br/>Logs & Artifacts]
        end

        subgraph "Security & Access"
            ACM[ACM Certificates]
            IAM[IAM Roles & Policies]
            SG[Security Groups]
        end
    end

    Users --> DNS
    DNS --> CDN
    CDN --> ALB
    GitHub --> OAUTH
    ALB --> NGINX
    NGINX --> OAUTH
    OAUTH --> EKS1
    OAUTH --> EKS2
    EKS1 --> RDS_PRIMARY
    EKS2 --> RDS_PRIMARY
    EKS1 --> REDIS
    EKS2 --> REDIS
    RDS_PRIMARY --> RDS_STANDBY
    NAT1 --> IGW
    NAT2 --> IGW
    EKS1 --> S3
    EKS2 --> S3

    classDef aws fill:#ff9900,stroke:#333,stroke-width:2px,color:#000
    classDef security fill:#d4edda,stroke:#155724,stroke-width:2px,color:#000
    classDef database fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#000
    classDef compute fill:#cce5ff,stroke:#004085,stroke-width:2px,color:#000

    class DNS,CDN,ALB,S3,IGW,NAT1,NAT2 aws
    class ACM,IAM,SG,OAUTH security
    class RDS_PRIMARY,RDS_STANDBY,REDIS database
    class EKS1,EKS2,CONTROL,NGINX compute
```

</div>

## Componentes Principales

### üåê Red y Conectividad
- **VPC Multi-AZ**: Red privada virtual distribuida en m√∫ltiples zonas de disponibilidad
- **Application Load Balancer**: Distribuci√≥n de tr√°fico con SSL termination
- **CloudFront CDN**: Distribuci√≥n global de contenido est√°tico
- **Route53**: Gesti√≥n de DNS con health checks

### üîß Computaci√≥n
- **Amazon EKS**: Kubernetes gestionado para orquestaci√≥n de contenedores
- **Auto Scaling Groups**: Escalado autom√°tico basado en m√©tricas
- **Spot Instances**: Optimizaci√≥n de costos con instancias spot

### üíæ Almacenamiento y Datos
- **RDS PostgreSQL**: Base de datos relacional con Multi-AZ para alta disponibilidad
- **ElastiCache Redis**: Cache distribuido para sesiones y datos frecuentes
- **S3 Buckets**: Almacenamiento de logs, artefactos y backups

### üîí Seguridad
- **WAF**: Protecci√≥n contra ataques web comunes
- **Security Groups**: Firewall a nivel de instancia
- **IAM Roles**: Gesti√≥n granular de permisos
- **ACM Certificates**: Certificados SSL/TLS gestionados

## Caracter√≠sticas de Alta Disponibilidad

### ‚ö° Redundancia
- **Multi-AZ Deployment**: Todos los componentes cr√≠ticos distribuidos en m√∫ltiples AZ
- **Database Failover**: Failover autom√°tico de RDS en caso de fallo
- **Load Balancing**: Distribuci√≥n autom√°tica de carga entre instancias

### üìà Escalabilidad
- **Horizontal Pod Autoscaler**: Escalado autom√°tico de pods seg√∫n CPU/memoria
- **Cluster Autoscaler**: Escalado autom√°tico de nodos EKS
- **Database Read Replicas**: R√©plicas de lectura para distribuir carga de consultas

### üîÑ Recuperaci√≥n ante Desastres
- **Backups Automatizados**: Backups diarios de RDS con retenci√≥n de 30 d√≠as
- **Point-in-Time Recovery**: Recuperaci√≥n a cualquier punto en el tiempo
- **Cross-Region Replication**: Replicaci√≥n de backups cr√≠ticos entre regiones

## Monitoreo y Observabilidad

### üìä M√©tricas y Alertas
- **CloudWatch**: M√©tricas de infraestructura y aplicaci√≥n
- **Prometheus**: M√©tricas detalladas de Kubernetes y aplicaciones
- **Grafana**: Dashboards personalizados para visualizaci√≥n

### üìù Logs y Trazabilidad
- **Centralized Logging**: Logs centralizados con ELK Stack
- **Distributed Tracing**: Trazabilidad de requests con Jaeger
- **Audit Logs**: Logs de auditor√≠a de cambios en infraestructura

## Gesti√≥n de Costos

### üí∞ Optimizaci√≥n
- **Resource Tagging**: Etiquetado consistente para seguimiento de costos
- **Reserved Instances**: Instancias reservadas para cargas predecibles
- **Spot Instances**: Uso de instancias spot para cargas tolerantes a interrupciones
- **Automated Scaling**: Escalado autom√°tico para optimizar recursos

### üìà Monitoreo de Costos
- **AWS Cost Explorer**: An√°lisis detallado de gastos
- **Budget Alerts**: Alertas autom√°ticas por exceso de presupuesto
- **Right Sizing**: Recomendaciones de dimensionamiento √≥ptimo