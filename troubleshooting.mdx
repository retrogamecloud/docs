---
title: 8.4. Soluci√≥n de Problemas Comunes
description: Gu√≠a completa de resoluci√≥n de problemas en Retro Game Hub para desarrollo y producci√≥n
icon: wrench-screwdriver
---

# üîß 8.4. Soluci√≥n de Problemas Comunes

Gu√≠a completa para diagnosticar y resolver problemas comunes en Retro Game Hub en entornos de desarrollo y producci√≥n.

---

## üè† 8.4.1. Entorno de Desarrollo

### üéÆ Problemas de Juegos

#### 8.4.1.1. Juego No Carga

**S√≠ntomas:**
- Pantalla negra despu√©s de seleccionar juego
- Mensaje "Error loading game"
- Barra de progreso se queda congelada

**Diagn√≥stico:**

```bash
# 1. Verificar que el archivo .jsdos existe localmente
ls -la public/juegos/

# 2. Verificar permisos de archivos
chmod 644 public/juegos/*.jsdos

# 3. Verificar servidor de desarrollo
curl -I http://localhost:3000/juegos/doom.jsdos

# 4. Verificar consola del navegador
# F12 > Console > buscar errores de CORS o 404
```

**Soluciones:**

**A. Archivo no encontrado (404)**
```bash
# Verificar que el archivo existe
cp ~/Downloads/doom.jsdos public/juegos/
```

**B. Problema de CORS en desarrollo**
```javascript
// next.config.js
module.exports = {
  async headers() {
    return [
      {
        source: '/juegos/:path*',
        headers: [
          { key: 'Access-Control-Allow-Origin', value: '*' },
          { key: 'Access-Control-Allow-Methods', value: 'GET' }
        ]
      }
    ]
  }
}
```

**C. js-dos no inicializa**
```javascript
// Verificar en consola del navegador
console.log(typeof Dos); // Debe ser 'function'

// Si es undefined, verificar que js-dos.js est√° cargado
<script src="/jsdos/js-dos.js"></script>
```

#### 8.4.1.2. Problemas de Performance

**S√≠ntomas:**
- Juego se ejecuta muy lento
- Audio entrecortado
- Controles con retraso

**Soluciones:**

```javascript
// Ajustar configuraci√≥n de js-dos
const dosOptions = {
  wdosboxUrl: "/jsdos/wdosbox.wasm",
  cycles: "auto",      // Reducir si hay problemas
  autolock: false,     // Desactivar autolock
  aspect: true,        // Mantener aspect ratio
  scaleControls: 0.75  // Reducir controles m√≥viles
};

// Para juegos espec√≠ficos
const gameSpecificOptions = {
  doom: { cycles: "max" },
  commander: { cycles: "15000" },
  prince: { cycles: "8000" }
};
```

#### 8.4.1.3. Controles No Funcionan

**S√≠ntomas:**
- Teclado no responde en el juego
- Controles t√°ctiles no aparecen en m√≥vil
- Gamepad no se detecta

**Diagn√≥stico:**
```javascript
// Verificar eventos de teclado
document.addEventListener('keydown', (e) => {
  console.log('Tecla presionada:', e.code);
});

// Verificar gamepad
navigator.getGamepads().forEach((gamepad, index) => {
  if (gamepad) {
    console.log(`Gamepad ${index}:`, gamepad.id);
  }
});
```

**Soluciones:**
```javascript
// Asegurar que el canvas tiene foco
const canvas = document.querySelector('canvas');
if (canvas) {
  canvas.focus();
  canvas.setAttribute('tabindex', '0');
}

// Configurar controles m√≥viles
const mobileControls = {
  showOnDesktop: false,
  showOnMobile: true,
  opacity: 0.8,
  size: 'medium'
};
```

### üåê Problemas de Red

#### 8.4.1.4. Assets No Cargan

**S√≠ntomas:**
- Im√°genes de juegos no se muestran
- Archivos .jsdos devuelven 404
- Fuentes no cargan correctamente

**Soluciones:**
```bash
# Verificar estructura de archivos
public/
‚îú‚îÄ‚îÄ juegos/
‚îÇ   ‚îú‚îÄ‚îÄ *.jsdos
‚îÇ   ‚îî‚îÄ‚îÄ capturas/
‚îú‚îÄ‚îÄ jsdos/
‚îÇ   ‚îú‚îÄ‚îÄ js-dos.js
‚îÇ   ‚îî‚îÄ‚îÄ wdosbox.wasm
‚îî‚îÄ‚îÄ fonts/

# Reiniciar servidor de desarrollo
npm run dev
# o
yarn dev
```

#### 8.4.1.5. Hot Reload No Funciona

**S√≠ntomas:**
- Cambios no se reflejan autom√°ticamente
- P√°gina requiere refresh manual
- WebSocket errors en consola

**Soluciones:**
```javascript
// next.config.js
module.exports = {
  experimental: {
    esmExternals: false
  },
  webpack: (config) => {
    config.watchOptions = {
      poll: 1000,
      aggregateTimeout: 300,
    }
    return config
  }
}
```

---

## üöÄ 8.4.2. Entorno de Producci√≥n

### üåç Problemas de Deployment

#### 8.4.2.1. Build Falla

**S√≠ntomas:**
- `npm run build` termina con error
- Errores de TypeScript en build
- Out of memory errors

**Diagn√≥stico:**
```bash
# Verificar logs completos
npm run build 2>&1 | tee build.log

# Verificar memoria disponible
node --max-old-space-size=4096 node_modules/.bin/next build

# Verificar dependencias
npm ls --depth=0
```

**Soluciones:**
```json
// package.json
{
  "scripts": {
    "build": "NODE_OPTIONS='--max-old-space-size=4096' next build"
  }
}
```

```javascript
// next.config.js
module.exports = {
  experimental: {
    workerThreads: false,
    cpus: 1
  }
}
```

#### 8.4.2.2. Problemas de CDN/Vercel

**S√≠ntomas:**
- Archivos grandes (.jsdos) no cargan
- Timeouts en la carga
- 413 Entity Too Large

**Soluciones:**
```javascript
// Configurar l√≠mites en vercel.json
{
  "functions": {
    "app/api/**/*.js": {
      "maxDuration": 30
    }
  },
  "headers": [
    {
      "source": "/juegos/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

### üîí Problemas de Seguridad

#### 8.4.2.3. HTTPS/SSL Issues

**S√≠ntomas:**
- Mixed content warnings
- Archivos no cargan por HTTP
- Certificate errors

**Soluciones:**
```javascript
// Forzar HTTPS en producci√≥n
// next.config.js
module.exports = {
  async redirects() {
    return [
      {
        source: '/:path*',
        has: [
          {
            type: 'header',
            key: 'x-forwarded-proto',
            value: 'http',
          },
        ],
        destination: 'https://tu-dominio.com/:path*',
        permanent: true,
      },
    ]
  },
}
```

---

## üõ†Ô∏è 8.4.3. Herramientas de Debug

### üìä Monitoring y Logs

#### 8.4.3.1. Debug de js-dos

```javascript
// Habilitar debug mode
window.JSDOS_DEBUG = true;

// Logger personalizado
const gameLogger = {
  log: (message, data) => {
    console.log(`[GAME] ${message}`, data);
  },
  error: (message, error) => {
    console.error(`[GAME ERROR] ${message}`, error);
    // Enviar a servicio de logging
  }
};

// Monitorear performance
const performanceMonitor = {
  start: performance.now(),
  checkFPS: () => {
    let fps = 0;
    let lastTime = performance.now();
    
    function countFPS() {
      const currentTime = performance.now();
      fps = Math.round(1000 / (currentTime - lastTime));
      lastTime = currentTime;
      console.log('FPS:', fps);
      requestAnimationFrame(countFPS);
    }
    
    requestAnimationFrame(countFPS);
  }
};
```

#### 8.4.3.2. Network Debug

```javascript
// Monitorear requests de juegos
const originalFetch = window.fetch;
window.fetch = function(...args) {
  const [url] = args;
  if (url.includes('.jsdos')) {
    console.log('Loading game:', url);
    const startTime = performance.now();
    
    return originalFetch.apply(this, args)
      .then(response => {
        const loadTime = performance.now() - startTime;
        console.log(`Game loaded in ${loadTime}ms:`, url);
        return response;
      })
      .catch(error => {
        console.error('Failed to load game:', url, error);
        throw error;
      });
  }
  return originalFetch.apply(this, args);
};
```

### üîç Diagnostic Tools

#### 8.4.3.3. Health Check Endpoint

```javascript
// pages/api/health.js
export default function handler(req, res) {
  const health = {
    status: 'OK',
    timestamp: new Date().toISOString(),
    checks: {
      jsdos: checkJsDosFiles(),
      games: checkGameFiles(),
      memory: process.memoryUsage()
    }
  };
  
  res.status(200).json(health);
}

function checkJsDosFiles() {
  // Verificar archivos cr√≠ticos de js-dos
  const fs = require('fs');
  const requiredFiles = [
    'public/jsdos/js-dos.js',
    'public/jsdos/wdosbox.wasm'
  ];
  
  return requiredFiles.every(file => {
    try {
      return fs.existsSync(file);
    } catch {
      return false;
    }
  });
}
```

---

## üìã 8.4.4. Checklist de Resoluci√≥n

### ‚úÖ Pasos Generales

1. **Identificar el problema**
   - [ ] Reproducir el error consistentemente
   - [ ] Verificar logs de consola (F12)
   - [ ] Verificar Network tab para requests fallidos

2. **Recopilar informaci√≥n**
   - [ ] Versi√≥n del navegador
   - [ ] Dispositivo (desktop/m√≥vil)
   - [ ] Entorno (desarrollo/producci√≥n)
   - [ ] Mensaje de error espec√≠fico

3. **Aplicar soluci√≥n**
   - [ ] Probar en entorno controlado
   - [ ] Verificar que no rompe otras funcionalidades
   - [ ] Documentar la soluci√≥n

4. **Prevenir recurrencia**
   - [ ] Agregar test para el caso
   - [ ] Actualizar documentaci√≥n
   - [ ] Considerar mejoras de UX

### üö® Escalaci√≥n

Si los problemas persisten:

1. **Verificar Issues conocidos**
   - Revisar documentaci√≥n de js-dos
   - Buscar en GitHub issues del proyecto
   - Consultar foros de desarrollo

2. **Crear issue detallado**
   - Pasos para reproducir
   - Logs y capturas de pantalla
   - Configuraci√≥n del entorno
   - Soluciones intentadas

3. **Contactar soporte**
   - Email: support@retrogamehub.com
   - Discord: Servidor de desarrollo
   - GitHub: Crear issue en repositorio

---

<div className="bg-blue-50 border-l-4 border-blue-400 p-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        üí° <strong>Tip:</strong> Mant√©n siempre una copia de backup de los archivos .jsdos funcionando y documenta cualquier configuraci√≥n espec√≠fica que hayas aplicado.
      </p>
    </div>
  </div>
</div>