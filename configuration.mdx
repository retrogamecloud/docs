---
title: 8.3. Configuraci贸n de Entornos
description: Referencia completa de configuraci贸n para todos los servicios de Retro Game Hub
icon: file-lines
---

# 锔 Configuraci贸n del Sistema

Esta p谩gina documenta todas las variables de configuraci贸n, par谩metros y ajustes disponibles en Retro Game Hub.

---

##  Variables de Entorno

### Auth Service

Variables de entorno para el servicio de autenticaci贸n:

```bash
# Puerto del servicio
PORT=3001

# Entorno de ejecuci贸n
NODE_ENV=production

# Base de datos PostgreSQL
DB_HOST=retrogame-db.xxxxx.eu-west-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=retrogamedb
DB_USER=postgres
DB_PASSWORD=<secret>

# JWT Configuration
JWT_SECRET=<generated-secret-key>
JWT_EXPIRATION=24h

# Redis para sesiones (opcional)
REDIS_HOST=redis-service
REDIS_PORT=6379
REDIS_PASSWORD=<secret>

# Rate Limiting
RATE_LIMIT_WINDOW=60000    # 1 minuto en ms
RATE_LIMIT_MAX_REQUESTS=10  # M谩ximo 10 requests/minuto

# CORS
CORS_ORIGIN=https://retrogamehub.games
```

#### Valores Recomendados por Entorno

| Variable | Development | Production |
|----------|-------------|------------|
| `NODE_ENV` | `development` | `production` |
| `JWT_EXPIRATION` | `7d` | `24h` |
| `RATE_LIMIT_MAX_REQUESTS` | `100` | `10` |
| `DB_HOST` | `localhost` | RDS endpoint |

---

### User Service

```bash
# Puerto del servicio
PORT=3002

# Entorno
NODE_ENV=production

# Base de datos
DB_HOST=retrogame-db.xxxxx.eu-west-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=retrogamedb
DB_USER=postgres
DB_PASSWORD=<secret>

# Validaci贸n de datos
USERNAME_MIN_LENGTH=3
USERNAME_MAX_LENGTH=20
EMAIL_VALIDATION_REGEX=^[^\s@]+@[^\s@]+\.[^\s@]+$

# Avatar por defecto
DEFAULT_AVATAR_URL=https://cdn.retrogamehub.games/avatars/default.png

# Cache de perfiles (segundos)
PROFILE_CACHE_TTL=300  # 5 minutos
```

---

### Game Catalog Service

```bash
# Puerto del servicio
PORT=3003

# Entorno
NODE_ENV=production

# Base de datos
DB_HOST=retrogame-db.xxxxx.eu-west-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=retrogamedb
DB_USER=postgres
DB_PASSWORD=<secret>

# APIs Externas
IGDB_CLIENT_ID=<client-id>
IGDB_CLIENT_SECRET=<client-secret>
MOBYGAMES_API_KEY=<api-key>

# Cache de juegos (segundos)
GAME_CACHE_TTL=3600  # 1 hora
SEARCH_CACHE_TTL=300  # 5 minutos

# Paginaci贸n
MAX_GAMES_PER_PAGE=50
DEFAULT_GAMES_PER_PAGE=20

# S3 para im谩genes
S3_BUCKET=retrogamehub-assets
S3_REGION=eu-west-1
AWS_ACCESS_KEY_ID=<access-key>
AWS_SECRET_ACCESS_KEY=<secret-key>
```

---

### Review Service

```bash
# Puerto del servicio
PORT=3004

# Entorno
NODE_ENV=production

# Base de datos
DB_HOST=retrogame-db.xxxxx.eu-west-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=retrogamedb
DB_USER=postgres
DB_PASSWORD=<secret>

# Moderaci贸n de contenido
ENABLE_PROFANITY_FILTER=true
MIN_REVIEW_LENGTH=50
MAX_REVIEW_LENGTH=5000

# Notificaciones
NOTIFICATION_SERVICE_URL=http://notification-service:3005
ENABLE_EMAIL_NOTIFICATIONS=true

# Cache de rese帽as
REVIEW_CACHE_TTL=1800  # 30 minutos
```

---

### Notification Service

```bash
# Puerto del servicio
PORT=3005

# Entorno
NODE_ENV=production

# Email SMTP
SMTP_HOST=smtp.amazonaws.com
SMTP_PORT=587
SMTP_USER=<smtp-user>
SMTP_PASSWORD=<smtp-password>
FROM_EMAIL=noreply@retrogamehub.games

# Push Notifications
FIREBASE_PROJECT_ID=retrogamehub
FIREBASE_PRIVATE_KEY=<private-key>
FIREBASE_CLIENT_EMAIL=<client-email>

# Rate Limiting para notificaciones
EMAIL_RATE_LIMIT=10  # emails por usuario por d铆a
PUSH_RATE_LIMIT=50   # push notifications por usuario por d铆a
```

---

### Frontend Application

```bash
# API Gateway
REACT_APP_API_BASE_URL=https://api.retrogamehub.games

# Autenticaci贸n
REACT_APP_JWT_STORAGE_KEY=retrogame_token

# Caracter铆sticas
REACT_APP_ENABLE_DARK_MODE=true
REACT_APP_ENABLE_ANALYTICS=true

# Analytics
REACT_APP_GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX

# CDN para assets
REACT_APP_CDN_BASE_URL=https://cdn.retrogamehub.games
```

---

##  Configuraci贸n Docker

### docker-compose.yml

```yaml
version: '3.8'
services:
  # Base de datos
  postgres:
    image: postgres:14-alpine
    environment:
      POSTGRES_DB: retrogamedb
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Redis para cache
  redis:
    image: redis:7-alpine
    command: redis-server --requirepass ${REDIS_PASSWORD}
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # Auth Service
  auth-service:
    build: ./services/auth
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=3001
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_NAME=retrogamedb
      - DB_USER=postgres
      - DB_PASSWORD=${DB_PASSWORD}
      - JWT_SECRET=${JWT_SECRET}
      - REDIS_HOST=redis
      - REDIS_PASSWORD=${REDIS_PASSWORD}
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_started
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # User Service
  user-service:
    build: ./services/user
    ports:
      - "3002:3002"
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=3002
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_NAME=retrogamedb
      - DB_USER=postgres
      - DB_PASSWORD=${DB_PASSWORD}
    depends_on:
      postgres:
        condition: service_healthy

  # Game Catalog Service
  game-catalog-service:
    build: ./services/game-catalog
    ports:
      - "3003:3003"
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=3003
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_NAME=retrogamedb
      - DB_USER=postgres
      - DB_PASSWORD=${DB_PASSWORD}
      - IGDB_CLIENT_ID=${IGDB_CLIENT_ID}
      - IGDB_CLIENT_SECRET=${IGDB_CLIENT_SECRET}
    depends_on:
      postgres:
        condition: service_healthy

  # Review Service
  review-service:
    build: ./services/review
    ports:
      - "3004:3004"
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=3004
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_NAME=retrogamedb
      - DB_USER=postgres
      - DB_PASSWORD=${DB_PASSWORD}
      - NOTIFICATION_SERVICE_URL=http://notification-service:3005
    depends_on:
      postgres:
        condition: service_healthy

  # Notification Service
  notification-service:
    build: ./services/notification
    ports:
      - "3005:3005"
    environment:
      - NODE_ENV=${NODE_ENV}
      - PORT=3005
      - SMTP_HOST=${SMTP_HOST}
      - SMTP_USER=${SMTP_USER}
      - SMTP_PASSWORD=${SMTP_PASSWORD}

  # Frontend
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_BASE_URL=http://localhost:4000
    depends_on:
      - auth-service
      - user-service
      - game-catalog-service
      - review-service

  # API Gateway (Nginx)
  api-gateway:
    image: nginx:alpine
    ports:
      - "4000:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - auth-service
      - user-service
      - game-catalog-service
      - review-service
      - notification-service

volumes:
  postgres_data:
  redis_data:
```

---

### .env Template

```bash
# ===========================================
# RETRO GAME HUB - ENVIRONMENT CONFIGURATION
# ===========================================

# Entorno general
NODE_ENV=development

# Base de datos
DB_PASSWORD=your_secure_db_password

# Redis
REDIS_PASSWORD=your_secure_redis_password

# JWT
JWT_SECRET=your_super_secure_jwt_secret_key_here

# APIs Externas
IGDB_CLIENT_ID=your_igdb_client_id
IGDB_CLIENT_SECRET=your_igdb_client_secret
MOBYGAMES_API_KEY=your_mobygames_api_key

# Email SMTP
SMTP_HOST=smtp.gmail.com
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# AWS S3 (para producci贸n)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
S3_BUCKET=retrogamehub-assets
S3_REGION=eu-west-1

# Firebase (para push notifications)
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_PRIVATE_KEY="your_firebase_private_key"
FIREBASE_CLIENT_EMAIL=your_firebase_client_email
```

---

## 锔 Configuraci贸n de Nginx

### nginx.conf

```nginx
events {
    worker_connections 1024;
}

http {
    upstream auth_service {
        server auth-service:3001;
    }
    
    upstream user_service {
        server user-service:3002;
    }
    
    upstream game_catalog_service {
        server game-catalog-service:3003;
    }
    
    upstream review_service {
        server review-service:3004;
    }
    
    upstream notification_service {
        server notification-service:3005;
    }

    # Rate limiting
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/m;
    limit_req_zone $binary_remote_addr zone=auth:10m rate=5r/m;

    server {
        listen 80;
        
        # Health check endpoint
        location /health {
            return 200 "OK";
            add_header Content-Type text/plain;
        }
        
        # Auth endpoints with stricter rate limiting
        location /api/auth/ {
            limit_req zone=auth burst=5 nodelay;
            proxy_pass http://auth_service/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # User service
        location /api/users/ {
            limit_req zone=api burst=10 nodelay;
            proxy_pass http://user_service/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # Game catalog service
        location /api/games/ {
            limit_req zone=api burst=20 nodelay;
            proxy_pass http://game_catalog_service/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # Review service
        location /api/reviews/ {
            limit_req zone=api burst=10 nodelay;
            proxy_pass http://review_service/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # Notification service
        location /api/notifications/ {
            limit_req zone=api burst=5 nodelay;
            proxy_pass http://notification_service/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
}
```

---

##  Configuraci贸n Adicional

### Configuraci贸n de Base de Datos

#### PostgreSQL postgresql.conf

```ini
# Configuraci贸n de memoria
shared_buffers = 256MB
work_mem = 4MB
maintenance_work_mem = 64MB

# Configuraci贸n de conexiones
max_connections = 100
listen_addresses = '*'

# Logging
log_statement = 'all'
log_duration = on
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '

# Performance
effective_cache_size = 1GB
random_page_cost = 1.1
```

#### ndices Recomendados

```sql
-- Auth Service
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_sessions_token ON sessions(token);
CREATE INDEX idx_sessions_user_id ON sessions(user_id);

-- Game Catalog
CREATE INDEX idx_games_title ON games USING gin(title gin_trgm_ops);
CREATE INDEX idx_games_genre ON games(genre);
CREATE INDEX idx_games_platform ON games(platform);
CREATE INDEX idx_games_release_date ON games(release_date);

-- Reviews
CREATE INDEX idx_reviews_game_id ON reviews(game_id);
CREATE INDEX idx_reviews_user_id ON reviews(user_id);
CREATE INDEX idx_reviews_rating ON reviews(rating);
CREATE INDEX idx_reviews_created_at ON reviews(created_at);
```

---

### Configuraci贸n de Redis

#### redis